{"version":3,"sources":["js/config.js","js/lookPath.js","js/movePathList.js","js/aniEffectMethod.js","index.js"],"names":["atc","isMobile","e","n","test","substr","navigator","userAgent","vendor","window","opera","moveFps","bulletFps","pixelWeigth","exports","w","Math","floor","innerWidth","h","innerHeight","objQuantity","objPolling","renderTime","bulletTime","moveTime","renderData","position","renderTemp","bullet","preState","enemy","enemyBullet","aniEffect","ps","rs","push","positionLimit","nowPosition","leftlimt","mainX","rightlimt","goStop","me","getST","find","el","index","splice","gostMove","thisY","r","nowY","margin","sin","PI","xMargin","call","goToOut","animation","totalRenCount","aniFn","renCount","fn","viewDom","indexOf","nextPolling","killCount","keyType","UP","RIGHT","DOWN","LEFT","SPACE","createEnemy","obj","name","life","shot","shotTime","movePath","look","hit","survivalTime","wasHit","bulletPs","cb","includes","bestScore","localStorage","getItem","setItem","dead","grapic","color","forEach","psObj","positionToXY","beginPath","rect","x","y","fillStyle","fill","action","renderType","enemyMove","shotByEnemy","deadPs","enemyImg","document","getElementById","drawImage","keyCodeMap","keycode","type","map","actionMove","round","key","innerHTML","JSON","stringify","render","objPosition","isSet","objArr","object","quantity","random","val","bulletArr","bulletPosition","enemyBulleArr","delArr","arr","gaphicShip","data","lookType","gaphic","TYPE","bestMileage","shipLookType","createObj","zark","getContext","clearRect","bulletImg","bulletObj","isDead","console","log","point","__x","__y","limit","addEventListener","keyCode","touch","event","preventDefault","touches","pageX","pageY","_ps","height","width","setInterval"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AIAA;;;;AACA;;;;AACA;;AACA;;;;AAYA,IAAI8D,WAAW,CAAf;AACA,IAAII,cAAc,CAAlB;AACA,IAAIC,YAAY,CAAhB;AACA,IAAIC,UAAU;AACZC,MAAI,KADQ;AAEZC,SAAO,KAFK;AAGZC,QAAM,KAHM;AAIZC,QAAM,KAJM;AAKZC,SAAO;AALK,CAAd;;AAQA,SAASC,WAAT,CAAqBC,GAArB,EAA0B;AACxB,OAAKC,IAAL,GAAYD,IAAIC,IAAhB,CADwB,CACF;AACtB,OAAKC,IAAL,GAAYF,IAAIE,IAAhB,CAFwB,CAEF;AACtB,OAAKrC,KAAL,GAAamC,IAAIhD,QAAjB;AACA,OAAKA,QAAL,GAAgBgD,IAAIhD,QAApB,CAJwB,CAIM;AAC9B,OAAKmD,IAAL,GAAYH,IAAIG,IAAhB,CALwB,CAKF;AACtB,OAAKC,QAAL,GAAgBJ,IAAII,QAApB,CANwB,CAMM;AAC9B,OAAKC,QAAL,GAAgBL,IAAIK,QAApB,CAPwB,CAOM;AAC9B,OAAKvD,QAAL,GAAgBkD,IAAIlD,QAAJ,IAAgB,CAAhC,CARwB,CAQW;AACnC,OAAKwD,IAAL,GAAYN,IAAIM,IAAhB;;AAEA,MAAIC,MAAM,KAAV;AACA,MAAIC,eAAe,CAAnB;AACA;AACA;AACA;;AAEA,OAAKvC,KAAL,GAAa,YAAY;AACvB,WAAOuC,YAAP;AACD,GAFD;AAGA,OAAKC,MAAL,GAAc,UAAUC,QAAV,EAAoBrB,OAApB,EAA6BsB,EAA7B,EAAiC;AAC7C,QAAI3C,KAAK,IAAT;AACA,QAAI,mBAAS,KAAKsC,IAAd,EAAoB,KAAKtD,QAAzB,EAAmC4D,QAAnC,CAA4CF,QAA5C,CAAJ,EAA2D;AACzD;AACAH,YAAM,IAAN;AACA,WAAKL,IAAL;AACA,UAAI,KAAKA,IAAL,GAAY,CAAhB,EAAmB;AACjB,2BAAW9C,KAAX,CAAiBc,IAAjB,CAAsB,UAAUC,EAAV,EAAcC,KAAd,EAAqB;AACzC,cAAID,OAAOH,EAAX,EAAe;AACb,gBAAI6C,YAAYC,aAAaC,OAAb,CAAqB,WAArB,CAAhB;AACA,+BAAW3D,KAAX,CAAiBiB,MAAjB,CAAwBD,KAAxB,EAA+B,CAA/B;AACAoB;AACA,gBAAIqB,YAAYrB,SAAhB,EAA2BsB,aAAaE,OAAb,CAAqB,WAArB,EAAkCxB,SAAlC;AAC5B;AACF,SAPD;AAQA,aAAKyB,IAAL;AACD,OAVD,MAUO;AACL,aAAKC,MAAL,CAAYpC,IAAZ,CAAiB,IAAjB,EAAuBO,OAAvB;AACA,YAAIsB,EAAJ,EAAQA;AACT;AAEF;AACF,GAtBD;;AAwBA,OAAKO,MAAL,GAAc,UAAU7B,OAAV,EAAmB;AAC/B,QAAI8B,QAAQZ,MAAM,KAAN,GAAc,OAA1B;AACA,uBAAS,KAAKD,IAAd,EAAoB,KAAKtD,QAAzB,EAAmCoE,OAAnC,CAA2C,UAAU7D,EAAV,EAAca,KAAd,EAAqB;AAC9D;AACA,UAAIiD,QAAQC,aAAa/D,EAAb,CAAZ;AACA8B,cAAQkC,SAAR;AACAlC,cAAQmC,IAAR,CAAaH,MAAMI,CAAN,GAAU,sBAAc,CAArC,EAAwCJ,MAAMK,CAA9C;AACArC,cAAQsC,SAAR,GAAoBR,KAApB;AACA9B,cAAQuC,IAAR;AACA;AACD,KARD;AASD,GAXD;;AAaA,OAAKC,MAAL,GAAc,UAAUC,UAAV,EAAsBzC,OAAtB,EAA+B;AAC3C,SAAK6B,MAAL,CAAYpC,IAAZ,CAAiB,IAAjB,EAAuBO,OAAvB;AACA,QAAIyC,eAAe,UAAnB,EAA+B;AAC7BC,gBAAUjD,IAAV,CAAe,IAAf;AACA,UAAI0B,eAAe,KAAKJ,QAApB,KAAiC,CAArC,EAAwC;AACtC,YAAI,KAAKD,IAAT,EAAe6B,YAAY,KAAKhF,QAAjB;AAChB;AACDwD;AACAD,YAAM,KAAN;AACD;AACF,GAVD;;AAYA,OAAKU,IAAL,GAAY,YAAY;AACtB,QAAIjE,WAAW,KAAKA,QAApB;AACA,QAAIiF,SAASX,aAAatE,QAAb,CAAb;AACA,QAAIkF,WAAWC,SAASC,cAAT,CAAwB,WAAxB,CAAf;AACA,uBAAW9E,SAAX,CAAqBG,IAArB,CACE,gCAAU,EAAV,EAAa,UAAS0B,QAAT,EAAkBE,OAAlB,EAA0B;AACrCA,cAAQgD,SAAR,CAAkBH,QAAlB,EAA4BD,OAAOR,CAAP,GAAW,CAAC,KAAKtC,QAAN,IAAkB,CAAzD,EAA4D8C,OAAOP,CAAnE,EAAsE,MAAMvC,QAA5E,EAAwF,MAAMA,QAA9F;AACD,KAFD,CADF;AAKD,GATD;AAWD;;AAED,SAAS4C,SAAT,GAAqB;AACnB,MAAI,uBAAa,KAAK1B,QAAlB,KAA+B,KAAKpC,KAAL,KAAe,KAAKnB,QAApB,IAAgC,CAAnE,EAAsE,uBAAa,KAAKuD,QAAlB,EAA4BvB,IAA5B,CAAiC,IAAjC;AACvE;;AAED,SAASwD,UAAT,CAAoBC,OAApB,EAA6BC,IAA7B,EAAmC;AACjC,MAAIC,MAAM;AACR,QAAI,aAAY;AACd,UAAID,QAAQ,SAAZ,EAAuB/C,QAAQC,EAAR,GAAa,IAAb;AACvB,UAAI8C,QAAQ,OAAZ,EAAqB/C,QAAQC,EAAR,GAAa,KAAb;AACtB,KAJO;AAKR,QAAI,aAAY;AACd,UAAI8C,QAAQ,SAAZ,EAAuB/C,QAAQE,KAAR,GAAgB,IAAhB;AACvB,UAAI6C,QAAQ,OAAZ,EAAqB/C,QAAQE,KAAR,GAAgB,KAAhB;AACtB,KARO;AASR,QAAI,aAAY;AACd,UAAI6C,QAAQ,SAAZ,EAAuB/C,QAAQG,IAAR,GAAe,IAAf;AACvB,UAAI4C,QAAQ,OAAZ,EAAqB/C,QAAQG,IAAR,GAAe,KAAf;AACtB,KAZO;AAaR,QAAI,aAAY;AACd,UAAI4C,QAAQ,SAAZ,EAAuB/C,QAAQI,IAAR,GAAe,IAAf;AACvB,UAAI2C,QAAQ,OAAZ,EAAqB/C,QAAQI,IAAR,GAAe,KAAf;AACtB,KAhBO;AAiBR,QAAI,aAAY;AACd,UAAI2C,QAAQ,SAAZ,EAAuB/C,QAAQK,KAAR,GAAgB,IAAhB;AACvB,UAAI0C,QAAQ,OAAZ,EAAqB/C,QAAQK,KAAR,GAAgB,KAAhB;AACtB;AApBO,GAAV;;AAuBA,MAAI2C,IAAIF,OAAJ,CAAJ,EAAkB;AAChBE,QAAIF,OAAJ;AACD;AACF;;AAED,SAASG,UAAT,GAAsB;AACpB,MAAIb,SAAS;AACXnC,QAAI,cAAY;AACd,UAAInC,KAAK,mBAAWP,QAApB;AACA,yBAAWA,QAAX,GAAuBO,iBAAS,CAAC,CAAX,GAAgBA,cAAhB,GAAyBA,EAA/C;AACD,KAJU;AAKXoC,WAAO,iBAAY;AACjB,UAAIpC,KAAK,mBAAWP,QAApB;AACA,UAAIO,KAAK,CAAL,IAAU,wBAAQ,CAAtB,EAAyB;AACvB,YAAI,CAACA,KAAK,CAAN,kBAAiB,CAArB,EAAwB;AACtB,6BAAWP,QAAX,GAAsBO,KAAK,CAA3B;AACD;AACF;AACF,KAZU;AAaXqC,UAAM,gBAAY;AAChB,UAAIrC,KAAK,mBAAWP,QAApB;AACA,UAAIyB,OAAOpC,KAAKsG,KAAL,CAAW,CAACpF,KAAKA,cAAN,aAAX,CAAX;AACA,UAAIA,iBAAS,qBAAb,EAAoB;AAClB,2BAAWP,QAAX,GAAuByB,gBAAD,GAAalB,cAAb,GAAsBA,EAA5C;AACD;AACF,KAnBU;AAoBXsC,UAAM,gBAAY;AAChB,UAAItC,KAAK,mBAAWP,QAApB;AACA,UAAIO,KAAK,CAAL,GAAS,CAAC,CAAd,EAAiB;AACf,YAAIA,mBAAW,CAAf,EAAkB;AAChB,6BAAWP,QAAX,GAAsBO,KAAK,CAA3B;AACD;AACF;AACF,KA3BU;AA4BXuC,WAAO,iBAAY;AACjBK;AACD;AA9BU,GAAb;AAgCA,OAAK,IAAIyC,GAAT,IAAgBnD,OAAhB,EAAyB;AACvB,QAAIA,QAAQmD,GAAR,KAAgB,IAApB,EAA0Bf,OAAOe,GAAP;AAC1BT,aAASC,cAAT,CAAwB,OAAxB,EAAiCS,SAAjC,GAA6CC,KAAKC,SAAL,CAAezB,aAAa,mBAAWtE,QAAxB,CAAf,EAAkD,IAAlD,EAAwD,CAAxD,CAA7C;AACD;AACDgG,SAAO,aAAP;AACD;;AAED,SAASC,WAAT,CAAqBC,KAArB,EAA4B;AAC1B,MAAIC,SAAS,mBAAWC,MAAxB;AACA,MAAIC,8BAAJ;;AAEA,MAAIH,KAAJ,EAAW;AACT,SAAK,IAAIzB,IAAI,CAAb,EAAgBA,IAAI4B,QAApB,EAA8B5B,GAA9B,EAAmC;AACjC0B,aAAO1F,IAAP,CAAYpB,KAAKC,KAAL,CAAWD,KAAKiH,MAAL,cAAX,CAAZ;AACD;AACF;;AAED,OAAK,IAAIV,GAAT,IAAgBO,MAAhB,EAAwB;AACtB,QAAII,MAAMJ,OAAOP,GAAP,CAAV;AACAO,WAAOP,GAAP,IAAcO,OAAOP,GAAP,aAAd;AACD;;AAED,OAAK,IAAIA,GAAT,IAAgBO,MAAhB,EAAwB;AACtB,QAAIA,OAAOP,GAAP,IAAc,wBAAQ,CAA1B,EAA6B;AAC3BO,aAAO9E,MAAP,CAAcuE,GAAd,EAAmB,CAAnB;AACD;AACF;AAEF;;AAED,SAASzC,IAAT,GAAgB;AACd,MAAIqD,YAAY,mBAAWtG,MAA3B;AACA,MAAI,CAACsG,UAAU5C,QAAV,CAAmB,mBAAW5D,QAAX,YAAnB,CAAL,EAAkDwG,UAAU/F,IAAV,CAAe,mBAAWT,QAAX,YAAf;AACnD;;AAED,SAASgF,WAAT,CAAqBhF,QAArB,EAA+B;AAC7B,MAAIwG,YAAY,mBAAWnG,WAA3B;AACA,MAAI,CAACmG,UAAU5C,QAAV,CAAmB5D,oBAAnB,CAAL,EAAuCwG,UAAU/F,IAAV,CAAeT,oBAAf;AACxC;;AAED,SAASyG,cAAT,GAA0B;AACxB,MAAID,YAAY,mBAAWtG,MAA3B;AACA,MAAIwG,gBAAgB,mBAAWrG,WAA/B;AACA,OAAK,IAAIuF,GAAT,IAAgBY,SAAhB,EAA2B;AACzBA,cAAUZ,GAAV,IAAiBY,UAAUZ,GAAV,aAAjB;AACA,QAAIY,UAAUZ,GAAV,IAAiB,CAArB,EAAwB;AACtBY,gBAAUnF,MAAV,CAAiBuE,GAAjB,EAAsB,CAAtB;AACD;AACF;AACD,OAAK,IAAIA,GAAT,IAAgBc,aAAhB,EAA+B;AAC7BA,kBAAcd,GAAd,IAAqBc,cAAcd,GAAd,aAArB;AACA,QAAIc,cAAcd,GAAd,IAAqB,wBAAQ,CAAjC,EAAoC;AAClCc,oBAAcrF,MAAd,CAAqBuE,GAArB,EAA0B,CAA1B;AACD;AACF;AACF;;AAED,SAASe,MAAT,CAAgBC,GAAhB,EAAqBL,GAArB,EAA0B;AACxB,OAAK,IAAIX,GAAT,IAAgBgB,GAAhB,EAAqB;AACnB,QAAIA,IAAIhB,GAAJ,KAAYW,GAAhB,EAAqB;AACnBK,UAAIvF,MAAJ,CAAWuE,GAAX,EAAgB,CAAhB;AACD;AACF;AACF;;AAED,SAASiB,UAAT,CAAoBC,IAApB,EAA0B;AACxB;AACA,MAAIzE,UAAUyE,KAAKzE,OAAnB;AACA,qBAASyE,KAAKC,QAAd,EAAwBD,KAAK9G,QAA7B,EAAuCoE,OAAvC,CAA+C,UAAU7D,EAAV,EAAca,KAAd,EAAqB;AAClE,QAAIiD,QAAQC,aAAa/D,EAAb,CAAZ;AACA8B,YAAQkC,SAAR;AACAlC,YAAQmC,IAAR,CAAaH,MAAMI,CAAN,GAAU,sBAAc,CAArC,EAAwCJ,MAAMK,CAA9C,uBAA8D,sBAAc,CAA5E;AACArC,YAAQsC,SAAR,GAAoB,OAApB;AACAtC,YAAQuC,IAAR;AACD,GAND;AAOD;;AAED,SAASoC,MAAT,CAAgBC,IAAhB,EAAsB;AACpB,MAAIpD,YAAYC,aAAaC,OAAb,CAAqB,WAArB,KAAqC,CAArD;AACA,MAAImD,cAAcpD,aAAaC,OAAb,CAAqB,aAArB,KAAuC,CAAzD;AACA,MAAIoD,eAAe,MAAnB;;AAEA,MAAI,CAAC,mBAAWnH,QAAZ,IAAwB,mBAAWA,QAAX,KAAwB,CAApD,EAAuD;AACrD,uBAAWA,QAAX,GAAsB,YAAIX,KAAKC,KAAL,CAAW,YAAI,CAAf,CAAJ,GAAwBD,KAAKC,KAAL,CAAW,YAAI,CAAf,CAA9C;AACD;;AAED,MAAI2H,SAAS,UAAb,EAAyB;AACvB,QAAIG,YAAY,KAAhB;AACA,QAAIjF,YAAYI,WAAhB,EAA6B;AAC3B,WAAK,IAAIkC,IAAI,CAAb,EAAgBA,uBAAhB,EAAiCA,GAAjC,EAAsC;AACpC,YAAI4C,OAAO,IAAItE,WAAJ,CAAgB;AACzBE,gBAAM,WADmB;AAEzBC,gBAAM,CAFmB;AAGzBlD,oBAAUX,KAAKC,KAAL,CAAWD,KAAKiH,MAAL,cAAX,CAHe;AAIzBnD,gBAAM,IAJmB;AAKzBC,oBAAU,CALe;AAMzBC,oBAAU,UANe;AAOzBvD,oBAAU,CAPe;AAQzBwD,gBAAM;AARmB,SAAhB,CAAX;AAUA,2BAAWlD,KAAX,CAAiBK,IAAjB,CAAsB4G,IAAtB;AACD;AACD9E,oBAAcJ,WAAW9C,KAAKC,KAAL,CAAWD,KAAKiH,MAAL,KAAgB,mBAAW,CAAX,CAAhB,GAAgC,mBAAW,CAAX,CAA3C,CAAzB;AACD;AACD;AACAL,gBAAYmB,SAAZ;AACAjF;AACA,QAAI+E,cAAc/E,QAAlB,EAA4B2B,aAAaE,OAAb,CAAqB,aAArB,EAAoC7B,QAApC;AAC7B;;AAED,MAAI8E,SAAS,aAAb,EAA4B;AAC1BR;AACD;;AAED;AACA,MAAIpE,UAAU8C,SAASC,cAAT,CAAwB,MAAxB,EAAgCkC,UAAhC,CAA2C,IAA3C,CAAd;AACAjF,UAAQkF,SAAR,CAAkB,CAAlB,EAAqB,CAArB,EAAwBzI,OAAOS,UAA/B,EAA2CT,OAAOW,WAAlD;;AAEA;AACA,qBAAWa,SAAX,CAAqB8D,OAArB,CAA6B,UAAUjD,EAAV,EAAc;AACzCA,OAAGkB,OAAH;AACD,GAFD;;AAIA;AACA,MAAIqE,gBAAgB,mBAAWrG,WAA/B;AACA,MAAImH,YAAYrC,SAASC,cAAT,CAAwB,WAAxB,CAAhB;AACA,qBAAWlF,MAAX,CAAkBuF,GAAlB,CAAsB,UAAUlF,EAAV,EAAc;AAClC,QAAIkH,YAAYnD,aAAa/D,EAAb,CAAhB;AACA8B,YAAQgD,SAAR,CAAkBmC,SAAlB,EAA6BC,UAAUhD,CAAV,GAAc,KAAK,CAAhD,EAAmDgD,UAAU/C,CAAV,GAAc,CAAjE,EAAoE,EAApE,EAAwE,EAAxE;;AAEA;AACA;AACA,QAAIgC,cAAc9C,QAAd,CAAuBrD,EAAvB,CAAJ,EAAgC;AAC9BmG,oBAAcrF,MAAd,CAAqBqF,cAAcpE,OAAd,CAAsB/B,EAAtB,CAArB,EAAgD,CAAhD;AACA,yBAAWL,MAAX,CAAkBmB,MAAlB,CAAyB,mBAAWnB,MAAX,CAAkBoC,OAAlB,CAA0B/B,EAA1B,CAAzB,EAAwD,CAAxD;AACD;AACD,QAAImG,cAAc9C,QAAd,CAAuBrD,cAAvB,CAAJ,EAAoC;AAClCmG,oBAAcrF,MAAd,CAAqBqF,cAAcpE,OAAd,CAAsB/B,cAAtB,CAArB,EAAoD,CAApD;AACA,yBAAWL,MAAX,CAAkBmB,MAAlB,CAAyB,mBAAWnB,MAAX,CAAkBoC,OAAlB,CAA0B/B,EAA1B,CAAzB,EAAwD,CAAxD;AACD;;AAED;AACA,uBAAWH,KAAX,CAAiBqF,GAAjB,CAAqB,UAAUzC,GAAV,EAAe;AAClCA,UAAIS,MAAJ,CAAWlD,EAAX,EAAe8B,OAAf,EAAwB,YAAY;AAClC,2BAAWnC,MAAX,CAAkBmB,MAAlB,CAAyB,mBAAWnB,MAAX,CAAkBoC,OAAlB,CAA0B/B,EAA1B,CAAzB,EAAwD,CAAxD;AACD,OAFD;AAGAyC,UAAIS,MAAJ,CAAWlD,cAAX,EAAmB8B,OAAnB,EAA4B,YAAY;AACtC,2BAAWnC,MAAX,CAAkBmB,MAAlB,CAAyB,mBAAWnB,MAAX,CAAkBoC,OAAlB,CAA0B/B,EAA1B,CAAzB,EAAwD,CAAxD;AACD,OAFD;AAGD,KAPD;AAQD,GAxBD;;AA0BA;AACAsG,aAAW;AACTxE,aAASA,OADA;AAET0E,cAAUI,YAFD;AAGTnH,cAAU,mBAAWA;AAHZ,GAAX;;AAMA;AACA,MAAIkF,WAAWC,SAASC,cAAT,CAAwB,UAAxB,CAAf;AACA,qBAAW/E,WAAX,CAAuBoF,GAAvB,CAA2B,UAAUlF,EAAV,EAAc;AACvC,QAAIkH,YAAYnD,aAAa/D,EAAb,CAAhB;AACA8B,YAAQgD,SAAR,CAAkBH,QAAlB,EAA4BuC,UAAUhD,CAAV,GAAc,KAAK,CAA/C,EAAkDgD,UAAU/C,CAAV,GAAc,CAAhE,EAAmE,EAAnE,EAAuE,EAAvE;AACD,GAHD;;AAKA;AACA,qBAAWtE,KAAX,CAAiBqF,GAAjB,CAAqB,UAAUzC,GAAV,EAAe;AAClCA,QAAI6B,MAAJ,CAAWoC,IAAX,EAAiB5E,OAAjB;AACD,GAFD;;AAIA8C,WAASC,cAAT,CAAwB,OAAxB,EAAiCS,SAAjC,GAA6C,+BAA+BrD,SAA/B,GAC3C,yBAD2C,IACdsB,aAAaC,OAAb,CAAqB,WAArB,KAAqC,CADvB,IAE3C,iBAF2C,GAEvB5B,QAFuB,GAG3C,sBAH2C,GAGlB+E,WAH3B;;AAKA,MAAIjD,OAAO,KAAX;AACA,MAAIyD,OAAO,mBAAW1H,QAAlB,EAA4BmH,YAA5B,CAAJ,EAA+C;AAC7ChF,eAAW,CAAX;AACAI,kBAAc,EAAd;AACA,uBAAWtC,UAAX,GAAwB,EAAxB;AACAuC,gBAAY,CAAZ;AACAyB,WAAO,IAAP;AACA0D,YAAQC,GAAR,CAAY,MAAZ;AACD;AAEF;;AAED,SAASF,MAAT,CAAgBG,KAAhB,EAAuBV,YAAvB,EAAqC;AACnC,MAAI3G,KAAK,KAAT;AACA,qBAAWH,WAAX,CAAuB+D,OAAvB,CAA+B,UAAU7D,EAAV,EAAc;AAC3C,QAAI,mBAAS4G,YAAT,EAAuBU,KAAvB,EAA8BjE,QAA9B,CAAuCrD,EAAvC,CAAJ,EAAgDC,KAAK,IAAL;AACjD,GAFD;AAGA,qBAAWJ,KAAX,CAAiBqF,GAAjB,CAAqB,UAAUrF,KAAV,EAAiB;AACpC,QAAI,mBAAS+G,YAAT,EAAuBU,KAAvB,EAA8BjE,QAA9B,CAAuCxD,MAAMJ,QAA7C,CAAJ,EAA4DQ,KAAK,IAAL;AAC7D,GAFD;AAGA,SAAOA,EAAP;AACD;;AAED,SAASwF,MAAT,CAAgBiB,IAAhB,EAAsB;AACpBD,SAAOC,IAAP;AACD;;AAED,SAAS3C,YAAT,CAAsB/D,EAAtB,EAA0B;AACxB,MAAIkE,IAAIlE,cAAR;AACA,MAAImE,IAAIrF,KAAKsG,KAAL,CAAW,CAACpF,KAAKkE,CAAN,aAAX,CAAR;AACA,SAAO;AACLlE,QAAIA,EADC;AAELkE,OAAGA,0BAAkB,sBAAc,CAF9B;AAGL;AACA;AACAC,OAAGA,IAAI5F,OAAOW,WAAX,YALE;AAMLqI,SAAKrD,CANA;AAOLsD,SAAKrD,CAPA;AAQLsD,WAAO,wBAAQ;AARV,GAAP;AAUD;;AAED7C,SAAS8C,gBAAT,CAA0B,SAA1B,EAAqC,UAAU1J,CAAV,EAAa;AAChD+G,aAAW/G,EAAE2J,OAAb,EAAsB,SAAtB;AACD,CAFD,EAEG,KAFH;;AAIA/C,SAAS8C,gBAAT,CAA0B,OAA1B,EAAmC,UAAU1J,CAAV,EAAa;AAC9C+G,aAAW/G,EAAE2J,OAAb,EAAsB,OAAtB;AACD,CAFD,EAEG,KAFH;;AAKA/C,SAAS8C,gBAAT,CAA0B,YAA1B,EAAwCE,KAAxC,EAA+C,KAA/C;AACAhD,SAAS8C,gBAAT,CAA0B,WAA1B,EAAuCE,KAAvC,EAA8C,KAA9C;AACAhD,SAAS8C,gBAAT,CAA0B,UAA1B,EAAsCE,KAAtC,EAA6C,KAA7C;;AAEA,SAASA,KAAT,CAAeC,KAAf,EAAsB;AACpB,MAAIA,QAAQA,SAAStJ,OAAOsJ,KAA5B;AACAA,QAAMC,cAAN;AACA,MAAI5D,IAAIpF,KAAKC,KAAL,CAAW8I,MAAME,OAAN,CAAc,CAAd,EAAiBC,KAAjB,sBAAX,CAAR;AACA,MAAI7D,IAAIrF,KAAKC,KAAL,CAAW8I,MAAME,OAAN,CAAc,CAAd,EAAiBE,KAAjB,sBAAX,CAAR;AACA,MAAIC,MAAO,YAAI/D,CAAJ,GAAQD,CAAnB;AACA,qBAAWzE,QAAX,GAAsByI,GAAtB;AACAtF;AACAgC,WAASC,cAAT,CAAwB,OAAxB,EAAiCS,SAAjC,GAA6C,kBAAkBpB,CAAlB,GAAsB,GAAtB,GAA4BC,CAA5B,GAAgC,KAAhC,IAAyC,YAAIA,CAAJ,GAAQD,CAAjD,CAA7C;AACD;;AAEDU,SAASC,cAAT,CAAwB,MAAxB,EAAgCsD,MAAhC,GAAyC5J,OAAOW,WAAhD;AACA0F,SAASC,cAAT,CAAwB,MAAxB,EAAgCuD,KAAhC,GAAwC7J,OAAOS,UAA/C;AACAqJ,YAAY,YAAY;AACtB5C,SAAO,UAAP;AACD,CAFD;AAGA4C,YAAY,YAAY;AACtB5C,SAAO,aAAP;AACAN;AACD,CAHD;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AJjbA,IAAIrH,MAAM;AACRC,YAAU,oBAAY;AACpB,QAAIC,IAAI,CAAC,CAAT;AACA,WAAO,UAAUC,CAAV,EAAa;AAClB,OAAC,oUAAoUC,IAApU,CAAyUD,CAAzU,KAA+U,0kDAA0kDC,IAA1kD,CAA+kDD,EAAEE,MAAF,CAAS,CAAT,EAAY,CAAZ,CAA/kD,CAAhV,MAAo7DH,IAAI,CAAC,CAAz7D;AACD,KAFM,CAELI,UAAUC,SAAV,IAAuBD,UAAUE,MAAjC,IAA2CC,OAAOC,KAF7C,GAEqDR,CAF5D;AAGD;AANO,CAAV;;AASA,IAAIS,UAAUX,IAAIC,QAAJ,KAAiB,EAAjB,GAAsB,EAApC;AACA,IAAIW,YAAYZ,IAAIC,QAAJ,KAAiB,EAAjB,GAAsB,EAAtC;AACA,IAAIY,cAAcb,IAAIC,QAAJ,KAAiB,EAAjB,GAAsB,EAAxC;;AAEAa,QAAQH,OAAR,GAAkBA,OAAlB;AACAG,QAAQF,SAAR,GAAoBA,SAApB;AACAE,QAAQD,WAAR,GAAsBA,WAAtB;AACAC,QAAQC,CAAR,GAAYC,KAAKC,KAAL,CAAWR,OAAOS,UAAP,GAAoBL,WAA/B,CAAZ;AACAC,QAAQK,CAAR,GAAYH,KAAKC,KAAL,CAAWR,OAAOW,WAAP,GAAqBP,WAAhC,CAAZ;AACAC,QAAQO,WAAR,GAAsB,CAAtB;AACAP,QAAQQ,UAAR,GAAqB,CAAC,EAAD,EAAK,EAAL,CAArB;AACAR,QAAQS,UAAR,GAAqB,OAAOZ,OAA5B;AACAG,QAAQU,UAAR,GAAqB,OAAOZ,SAA5B;AACAE,QAAQW,QAAR,GAAmB,OAAO,EAA1B;AACAX,QAAQY,UAAR,GAAqB;AACnBC,YAAU,IADS;AAEnBC,cAAY,EAFO;AAGnBC,UAAQ,EAHW;AAInBC,YAAU,EAJS;AAKnBC,SAAO,EALY;AAMnBC,eAAa,EANM;AAOnBC,aAAU;AAPS,CAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AGvBA;;AACAnB,QAAQ6C,SAAR,GAAoB,UAAUC,aAAV,EAAwBC,KAAxB,EAA+B;AACjD,MAAIC,WAAW,CAAf;AACA,MAAIC,KAAK,SAALA,EAAK,CAAUC,OAAV,EAAmB;AAC1B,QAAIF,YAAYF,aAAhB,EAA+B;AAC7B,yBAAW3B,SAAX,CAAqBe,MAArB,CAA4B,mBAAWf,SAAX,CAAqBgC,OAArB,CAA6BF,EAA7B,CAA5B,EAA8D,CAA9D;AACD;AACDF,UAAMC,QAAN,EAAeE,OAAf;AACAF;AACD,GAND;AAOA,SAAOC,EAAP;AACD,CAVD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","file":"6432f0833db0b42044849fceaf81427b.map","sourcesContent":["var atc = {\n  isMobile: function () {\n    var e = !1;\n    return function (n) {\n      (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|webgolds|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(n.substr(0, 4))) && (e = !0)\n    }(navigator.userAgent || navigator.vendor || window.opera), e\n  }\n};\n\nvar moveFps = atc.isMobile() ? 60 : 30;\nvar bulletFps = atc.isMobile() ? 60 : 30;\nvar pixelWeigth = atc.isMobile() ? 10 : 20;\n\nexports.moveFps = moveFps;\nexports.bulletFps = bulletFps;\nexports.pixelWeigth = pixelWeigth;\nexports.w = Math.floor(window.innerWidth / pixelWeigth);\nexports.h = Math.floor(window.innerHeight / pixelWeigth);\nexports.objQuantity = 1;\nexports.objPolling = [20, 40];\nexports.renderTime = 1000 / moveFps;\nexports.bulletTime = 1000 / bulletFps;\nexports.moveTime = 1000 / 30;\nexports.renderData = {\n  position: null,\n  renderTemp: {},\n  bullet: [],\n  preState: {},\n  enemy: [],\n  enemyBullet: [],\n  aniEffect:[],\n};","import { w } from './config';\nexport default {\n  'zark': function (ps) {\n    var rs = [ps];\n    if (ps % w !== w - 1) {\n      rs.push(ps - w + 1);\n    }\n    if (ps % w !== 0 || ps == 0) {\n      rs.push(ps - w - 1);\n    }\n    return rs;\n  },\n  'MK-1': function (ps) {\n    var rs = [ps, ps + w, ps + 3 * w];\n    if (ps % w !== w - 1) {\n      rs.push(ps + 2 * w + 1);\n      rs.push(ps + 3 * w + 2);\n      rs.push(ps + 4 * w + 1);\n    }\n    if (ps % w !== 0) {\n      rs.push(ps + 2 * w - 1);\n      rs.push(ps + 3 * w - 2);\n      rs.push(ps + 4 * w - 1);\n    }\n    return rs;\n  },\n  'MK-2': function (ps) {\n    var rs = [ps, ps + w, ps + 3 * w];\n    if (ps % w !== w - 1) {\n      rs.push(ps + 2 * w + 1);\n    }\n    if (ps % w !== 0) {\n      rs.push(ps + 2 * w - 1);\n    }\n    return rs;\n  },\n  'MK-3': function (ps) {\n    var rs = [ps, ps + w, ps + 2 * w, ps + 4 * w,];\n    if (ps % w !== w - 1) {\n      rs.push(ps + 2 * w + 1);\n      rs.push(ps + 3 * w + 1);\n    }\n    if (ps % w !== 0) {\n      rs.push(ps + 2 * w - 1);\n      rs.push(ps + 3 * w - 1);\n    }\n    return rs;\n  },\n};","import { \n  w,\n  h,\n  renderData \n} from './config';\n\nfunction positionLimit(nowPosition) {\n  var leftlimt = this.mainX - (this.mainX % w);\n  var rightlimt = leftlimt + w - 1;\n  this.mainX += w;\n  if (nowPosition > rightlimt) {\n    return rightlimt;\n  }\n  if (nowPosition < leftlimt) {\n    return leftlimt;\n  }\n  return nowPosition;\n};\n\nexport default {\n  goStop: function () {\n    var me = this;\n    if (this.getST() < 6) this.position += w;\n    if (this.getST() > 80) this.position += w;\n    if (this.position > w * h - 1) {\n      renderData.enemy.find(function (el, index) {\n        if (el === me) renderData.enemy.splice(index, 1);\n      })\n    };\n  },\n  gostMove: function () {\n    var me = this;\n    var thisY = Math.floor(this.position / h);\n    var r = h / 4;\n    var nowY = Math.floor(this.mainX / w);\n    var margin = Math.sin(Math.PI / r * nowY);\n    var xMargin = Math.floor(margin * r);\n    //console.log(nowY, margin);\n    this.position = positionLimit.call(this, this.mainX + xMargin);\n    if (this.position > w * h - 1) {\n      renderData.enemy.find(function (el, index) {\n        if (el === me) renderData.enemy.splice(index, 1);\n      })\n    };\n  },\n  goToOut: function () {\n    this.position += w;\n    var me = this;\n    if (this.position > w * h - 1) {\n      renderData.enemy.find(function (el, index) {\n        if (el === me) renderData.enemy.splice(index, 1);\n      })\n    };\n  },\n};","import { renderData } from './config';\nexports.animation = function (totalRenCount,aniFn) {\n  var renCount = 1;\n  var fn = function (viewDom) {\n    if (renCount == totalRenCount) {\n      renderData.aniEffect.splice(renderData.aniEffect.indexOf(fn), 1);\n    }\n    aniFn(renCount,viewDom);    \n    renCount++;\n  }\n  return fn;\n};","import lookPath from './js/lookPath';\nimport movePathList from './js/movePathList';\nimport { animation } from './js/aniEffectMethod'\nimport {\n  pixelWeigth,\n  w,\n  h,\n  objQuantity,\n  objPolling,\n  renderTime,\n  bulletTime,\n  moveTime,\n  renderData,\n} from './js/config';\n\nvar renCount = 0;\nvar nextPolling = 1;\nvar killCount = 0;\nvar keyType = {\n  UP: false,\n  RIGHT: false,\n  DOWN: false,\n  LEFT: false,\n  SPACE: false\n};\n\nfunction createEnemy(obj) {\n  this.name = obj.name; //名字\n  this.life = obj.life; //生命值\n  this.mainX = obj.position;\n  this.position = obj.position; //位置\n  this.shot = obj.shot; //會不會發射子彈\n  this.shotTime = obj.shotTime; //連發數\n  this.movePath = obj.movePath; //移動的路徑類型\n  this.moveTime = obj.moveTime || 1; // 移動間隔\n  this.look = obj.look;\n\n  var hit = false;\n  var survivalTime = 0;\n  // var hitPath = lookPath[this.look](this.position).map(function () {\n  //   return true;\n  // });\n\n  this.getST = function () {\n    return survivalTime;\n  };\n  this.wasHit = function (bulletPs, viewDom, cb) {\n    var me = this;\n    if (lookPath[this.look](this.position).includes(bulletPs)) {\n      // hitPath[lookPath[this.look](this.position).indexOf(bulletPs)] = false;\n      hit = true;\n      this.life--;\n      if (this.life < 1) {\n        renderData.enemy.find(function (el, index) {\n          if (el === me) {\n            var bestScore = localStorage.getItem('bestScore');\n            renderData.enemy.splice(index, 1);\n            killCount++;\n            if (bestScore < killCount) localStorage.setItem('bestScore', killCount);\n          }\n        })\n        this.dead();\n      } else {\n        this.grapic.call(this, viewDom);\n        if (cb) cb();\n      };\n\n    }\n  };\n\n  this.grapic = function (viewDom) {\n    var color = hit ? 'red' : 'white';\n    lookPath[this.look](this.position).forEach(function (ps, index) {\n      //if (hitPath[index]) {    \n      var psObj = positionToXY(ps);\n      viewDom.beginPath();\n      viewDom.rect(psObj.x - pixelWeigth / 2, psObj.y, pixelWeigth, pixelWeigth);\n      viewDom.fillStyle = color;\n      viewDom.fill();\n      //}\n    });\n  };\n\n  this.action = function (renderType, viewDom) {\n    this.grapic.call(this, viewDom);\n    if (renderType === 'OBJ_MOVE') {\n      enemyMove.call(this);\n      if (survivalTime % this.shotTime === 0) {\n        if (this.shot) shotByEnemy(this.position);\n      };\n      survivalTime++;\n      hit = false;\n    }\n  };\n\n  this.dead = function () {\n    var position = this.position;\n    var deadPs = positionToXY(position);\n    var enemyImg = document.getElementById(\"explosion\");\n    renderData.aniEffect.push(\n      animation(50,function(renCount,viewDom){\n        viewDom.drawImage(enemyImg, deadPs.x - (50 - renCount) / 2, deadPs.y, 120 - renCount  , 120 - renCount);\n      })\n    );\n  }\n\n}\n\nfunction enemyMove() {\n  if (movePathList[this.movePath] && this.getST() % this.moveTime == 0) movePathList[this.movePath].call(this);\n};\n\nfunction keyCodeMap(keycode, type) {\n  var map = {\n    38: function () {\n      if (type == 'keydown') keyType.UP = true;\n      if (type == 'keyup') keyType.UP = false;\n    },\n    39: function () {\n      if (type == 'keydown') keyType.RIGHT = true;\n      if (type == 'keyup') keyType.RIGHT = false;\n    },\n    40: function () {\n      if (type == 'keydown') keyType.DOWN = true;\n      if (type == 'keyup') keyType.DOWN = false;\n    },\n    37: function () {\n      if (type == 'keydown') keyType.LEFT = true;\n      if (type == 'keyup') keyType.LEFT = false;\n    },\n    32: function () {\n      if (type == 'keydown') keyType.SPACE = true;\n      if (type == 'keyup') keyType.SPACE = false;\n    }\n  };\n\n  if (map[keycode]) {\n    map[keycode]();\n  }\n}\n\nfunction actionMove() {\n  var action = {\n    UP: function () {\n      var ps = renderData.position;\n      renderData.position = (ps - w > -1) ? ps - w : ps;\n    },\n    RIGHT: function () {\n      var ps = renderData.position;\n      if (ps + 1 <= w * h - 1) {\n        if ((ps + 1) % w !== 0) {\n          renderData.position = ps + 1;\n        }\n      }\n    },\n    DOWN: function () {\n      var ps = renderData.position;\n      var nowY = Math.round((ps - ps % w) / w);\n      if (ps + w < w * h) {\n        renderData.position = (nowY < h) ? ps + w : ps;\n      }\n    },\n    LEFT: function () {\n      var ps = renderData.position;\n      if (ps - 1 > -1) {\n        if (ps % w !== 0) {\n          renderData.position = ps - 1;\n        }\n      }\n    },\n    SPACE: function () {\n      shot();\n    }\n  };\n  for (var key in keyType) {\n    if (keyType[key] == true) action[key]();\n    document.getElementById('debug').innerHTML = JSON.stringify(positionToXY(renderData.position), null, 2);\n  }\n  render('PLAYER_MOVE');\n}\n\nfunction objPosition(isSet) {\n  var objArr = renderData.object;\n  var quantity = objQuantity;\n\n  if (isSet) {\n    for (var x = 0; x < quantity; x++) {\n      objArr.push(Math.floor(Math.random() * w));\n    }\n  }\n\n  for (var key in objArr) {\n    var val = objArr[key];\n    objArr[key] = objArr[key] + w;\n  }\n\n  for (var key in objArr) {\n    if (objArr[key] > w * h - 1) {\n      objArr.splice(key, 1);\n    };\n  }\n\n}\n\nfunction shot() {\n  var bulletArr = renderData.bullet;\n  if (!bulletArr.includes(renderData.position - w)) bulletArr.push(renderData.position - w);\n}\n\nfunction shotByEnemy(position) {\n  var bulletArr = renderData.enemyBullet;\n  if (!bulletArr.includes(position + w)) bulletArr.push(position + w);\n}\n\nfunction bulletPosition() {\n  var bulletArr = renderData.bullet;\n  var enemyBulleArr = renderData.enemyBullet;\n  for (var key in bulletArr) {\n    bulletArr[key] = bulletArr[key] - w;\n    if (bulletArr[key] < 0) {\n      bulletArr.splice(key, 1);\n    };\n  }\n  for (var key in enemyBulleArr) {\n    enemyBulleArr[key] = enemyBulleArr[key] + w;\n    if (enemyBulleArr[key] > w * h + 1) {\n      enemyBulleArr.splice(key, 1);\n    };\n  }\n}\n\nfunction delArr(arr, val) {\n  for (var key in arr) {\n    if (arr[key] == val) {\n      arr.splice(key, 1);\n    }\n  }\n}\n\nfunction gaphicShip(data) {\n  // var color = hit ? 'red' : 'white';\n  var viewDom = data.viewDom;\n  lookPath[data.lookType](data.position).forEach(function (ps, index) {\n    var psObj = positionToXY(ps);\n    viewDom.beginPath();\n    viewDom.rect(psObj.x - pixelWeigth / 2, psObj.y, pixelWeigth, pixelWeigth + 1);\n    viewDom.fillStyle = 'white';\n    viewDom.fill();\n  });\n};\n\nfunction gaphic(TYPE) {\n  var bestScore = localStorage.getItem('bestScore') || 0;\n  var bestMileage = localStorage.getItem('bestMileage') || 0;\n  var shipLookType = 'MK-2';\n\n  if (!renderData.position && renderData.position !== 0) {\n    renderData.position = w * Math.floor(h / 2) - Math.floor(w / 2);\n  }\n\n  if (TYPE === 'OBJ_MOVE') {\n    var createObj = false;\n    if (renCount == nextPolling) {\n      for (var x = 0; x < objQuantity; x++) {\n        var zark = new createEnemy({\n          name: 'ZARK-ZERO',\n          life: 3,\n          position: Math.floor(Math.random() * w),\n          shot: true,\n          shotTime: 3,\n          movePath: 'gostMove',\n          moveTime: 5,\n          look: 'zark',\n        });\n        renderData.enemy.push(zark);\n      }\n      nextPolling = renCount + Math.floor(Math.random() * objPolling[1] + objPolling[0]);\n    }\n    // document.getElementById('debug').innerHTML = nextPolling + ', ' + renCount;\n    objPosition(createObj);\n    renCount++;\n    if (bestMileage < renCount) localStorage.setItem('bestMileage', renCount);\n  }\n\n  if (TYPE === 'BULLET_MOVE') {\n    bulletPosition();\n  }\n\n  //canvas\n  var viewDom = document.getElementById('view').getContext('2d');\n  viewDom.clearRect(0, 0, window.innerWidth, window.innerHeight);\n\n  // dead\n  renderData.aniEffect.forEach(function (el) {\n    el(viewDom);\n  })\n\n  // bullet\n  var enemyBulleArr = renderData.enemyBullet;\n  var bulletImg = document.getElementById(\"bulletImg\");\n  renderData.bullet.map(function (ps) {\n    var bulletObj = positionToXY(ps);\n    viewDom.drawImage(bulletImg, bulletObj.x - 13 / 2, bulletObj.y - 5, 13, 64);\n\n    //defense\n    // console.log(ps, enemyBulleArr);\n    if (enemyBulleArr.includes(ps)) {\n      enemyBulleArr.splice(enemyBulleArr.indexOf(ps), 1);\n      renderData.bullet.splice(renderData.bullet.indexOf(ps), 1);\n    }\n    if (enemyBulleArr.includes(ps + w)) {\n      enemyBulleArr.splice(enemyBulleArr.indexOf(ps + w), 1);\n      renderData.bullet.splice(renderData.bullet.indexOf(ps), 1);\n    }\n\n    //kill enemy\n    renderData.enemy.map(function (obj) {\n      obj.wasHit(ps, viewDom, function () {\n        renderData.bullet.splice(renderData.bullet.indexOf(ps), 1);\n      });\n      obj.wasHit(ps + w, viewDom, function () {\n        renderData.bullet.splice(renderData.bullet.indexOf(ps), 1);\n      });\n    })\n  })\n\n  // ship\n  gaphicShip({\n    viewDom: viewDom,\n    lookType: shipLookType,\n    position: renderData.position,\n  });\n\n  //enmyBullet\n  var enemyImg = document.getElementById(\"enemyImg\");\n  renderData.enemyBullet.map(function (ps) {\n    var bulletObj = positionToXY(ps);\n    viewDom.drawImage(enemyImg, bulletObj.x - 15 / 2, bulletObj.y - 5, 15, 15);\n  })\n\n  // enmy\n  renderData.enemy.map(function (obj) {\n    obj.action(TYPE, viewDom);\n  })\n\n  document.getElementById('score').innerHTML = 'Score: <div class=\"score\">' + killCount +\n    '</div><br/>Best score: ' + (localStorage.getItem('bestScore') || 0) +\n    '<br/> Mileage: ' + renCount +\n    '<br/> Best Mileage: ' + bestMileage;\n\n  var dead = false;\n  if (isDead(renderData.position, shipLookType)) {\n    renCount = 0;\n    nextPolling = 20;\n    renderData.renderTemp = {};\n    killCount = 0;\n    dead = true;\n    console.log('dead');\n  }\n\n}\n\nfunction isDead(point, shipLookType) {\n  var rs = false;\n  renderData.enemyBullet.forEach(function (ps) {\n    if (lookPath[shipLookType](point).includes(ps)) rs = true;\n  })\n  renderData.enemy.map(function (enemy) {\n    if (lookPath[shipLookType](point).includes(enemy.position)) rs = true;\n  })\n  return rs;\n}\n\nfunction render(TYPE) {\n  gaphic(TYPE);\n}\n\nfunction positionToXY(ps) {\n  var x = ps % w;\n  var y = Math.round((ps - x) / w);\n  return {\n    ps: ps,\n    x: x * pixelWeigth + pixelWeigth / 2,\n    //y: Math.round(y / h) * pixelWeigth,\n    // y: Math.round(y / h) * window.innerHeight / h,\n    y: y * window.innerHeight / h,\n    __x: x,\n    __y: y,\n    limit: w * h - 1,\n  };\n}\n\ndocument.addEventListener('keydown', function (e) {\n  keyCodeMap(e.keyCode, 'keydown');\n}, false);\n\ndocument.addEventListener('keyup', function (e) {\n  keyCodeMap(e.keyCode, 'keyup');\n}, false);\n\n\ndocument.addEventListener('touchstart', touch, false);\ndocument.addEventListener('touchmove', touch, false);\ndocument.addEventListener('touchend', touch, false);\n\nfunction touch(event) {\n  var event = event || window.event;\n  event.preventDefault();\n  var x = Math.floor(event.touches[0].pageX / pixelWeigth);\n  var y = Math.floor(event.touches[0].pageY / pixelWeigth);\n  var _ps = (w * y + x);\n  renderData.position = _ps;\n  shot();\n  document.getElementById(\"debug\").innerHTML = \"Touch moved (\" + x + \",\" + y + \"), \" + (w * y + x);\n}\n\ndocument.getElementById('view').height = window.innerHeight;\ndocument.getElementById('view').width = window.innerWidth;\nsetInterval(function () {\n  render('OBJ_MOVE')\n}, renderTime);\nsetInterval(function () {\n  render('BULLET_MOVE')\n  actionMove()\n}, bulletTime);\n\n\n//todo\n//敵機死亡效果\n//分開敵人及主角機的lookPath\n//組成像素可縮小\n//子彈種類多元\n//主角機有血量\n//主角機階段進化"]}