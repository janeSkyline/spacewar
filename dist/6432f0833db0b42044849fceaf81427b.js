require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var s=e[n]=new t.Module(n);r[n][0].call(s.exports,i,s,s.exports)}return e[n].exports}function o(r){this.id=r,this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.isParcelRequire=!0,t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({20:[function(require,module,exports) {
var e={isMobile:function(){var e,i=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|webgolds|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(i=!0),i}},i=e.isMobile()?60:30,o=e.isMobile()?60:30,t=e.isMobile()?10:20;exports.moveFps=i,exports.bulletFps=o,exports.pixelWeigth=t,exports.w=Math.floor(window.innerWidth/t),exports.h=Math.floor(window.innerHeight/t),exports.objQuantity=1,exports.objPolling=[20,40],exports.renderTime=1e3/i,exports.bulletTime=1e3/o,exports.moveTime=1e3/30,exports.renderData={position:null,renderTemp:{},bullet:[],preState:{},enemy:[],enemyBullet:[],aniEffect:[]};
},{}],17:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var w=require("./config");exports.default={zark:function(u){var r=[u];return u%w.w!=w.w-1&&r.push(u-w.w+1),u%w.w==0&&0!=u||r.push(u-w.w-1),r},"MK-1":function(u){var r=[u,u+w.w,u+3*w.w];return u%w.w!=w.w-1&&(r.push(u+2*w.w+1),r.push(u+3*w.w+2),r.push(u+4*w.w+1)),u%w.w!=0&&(r.push(u+2*w.w-1),r.push(u+3*w.w-2),r.push(u+4*w.w-1)),r},"MK-2":function(u){var r=[u,u+w.w,u+3*w.w];return u%w.w!=w.w-1&&r.push(u+2*w.w+1),u%w.w!=0&&r.push(u+2*w.w-1),r},"MK-3":function(u){var r=[u,u+w.w,u+2*w.w,u+4*w.w];return u%w.w!=w.w-1&&(r.push(u+2*w.w+1),r.push(u+3*w.w+1)),u%w.w!=0&&(r.push(u+2*w.w-1),r.push(u+3*w.w-1)),r}};
},{"./config":20}],18:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./config");function t(t){var n=this.mainX-this.mainX%i.w,e=n+i.w-1;return this.mainX+=i.w,t>e?e:t<n?n:t}exports.default={goStop:function(){var t=this;this.getST()<6&&(this.position+=i.w),this.getST()>80&&(this.position+=i.w),this.position>i.w*i.h-1&&i.renderData.enemy.find(function(n,e){n===t&&i.renderData.enemy.splice(e,1)})},gostMove:function(){var n=this,e=(Math.floor(this.position/i.h),i.h/4),o=Math.floor(this.mainX/i.w),s=Math.sin(Math.PI/e*o),a=Math.floor(s*e);this.position=t.call(this,this.mainX+a),this.position>i.w*i.h-1&&i.renderData.enemy.find(function(t,e){t===n&&i.renderData.enemy.splice(e,1)})},goToOut:function(){this.position+=i.w;var t=this;this.position>i.w*i.h-1&&i.renderData.enemy.find(function(n,e){n===t&&i.renderData.enemy.splice(e,1)})}};
},{"./config":20}],19:[function(require,module,exports) {
"use strict";var e=require("./config");exports.animation=function(n,r){var i=1;return function t(a){i==n&&e.renderData.aniEffect.splice(e.renderData.aniEffect.indexOf(t),1),r(i,a),i++}};
},{"./config":20}],14:[function(require,module,exports) {
"use strict";var e=require("./js/lookPath"),t=r(e),n=require("./js/movePathList"),i=r(n),o=require("./js/aniEffectMethod"),a=require("./js/config");function r(e){return e&&e.__esModule?e:{default:e}}var l=0,d=1,s=0,u={UP:!1,RIGHT:!1,DOWN:!1,LEFT:!1,SPACE:!1};function c(e){this.name=e.name,this.life=e.life,this.mainX=e.position,this.position=e.position,this.shot=e.shot,this.shotTime=e.shotTime,this.movePath=e.movePath,this.moveTime=e.moveTime||1,this.look=e.look;var n=!1,i=0;this.getST=function(){return i},this.wasHit=function(e,i,o){var r=this;t.default[this.look](this.position).includes(e)&&(n=!0,this.life--,this.life<1?(a.renderData.enemy.find(function(e,t){if(e===r){var n=localStorage.getItem("bestScore");a.renderData.enemy.splice(t,1),n<++s&&localStorage.setItem("bestScore",s)}}),this.dead()):(this.grapic.call(this,i),o&&o()))},this.grapic=function(e){var i=n?"red":"white";t.default[this.look](this.position).forEach(function(t,n){var o=T(t);e.beginPath(),e.rect(o.x-a.pixelWeigth/2,o.y,a.pixelWeigth,a.pixelWeigth),e.fillStyle=i,e.fill()})},this.action=function(e,t){this.grapic.call(this,t),"OBJ_MOVE"===e&&(h.call(this),i%this.shotTime==0&&this.shot&&w(this.position),i++,n=!1)},this.dead=function(){var e=T(this.position),t=document.getElementById("explosion");a.renderData.aniEffect.push((0,o.animation)(50,function(n,i){i.drawImage(t,e.x-(50-n)/2,e.y,120-n,120-n)}))}}function h(){i.default[this.movePath]&&this.getST()%this.moveTime==0&&i.default[this.movePath].call(this)}function f(e,t){var n={38:function(){"keydown"==t&&(u.UP=!0),"keyup"==t&&(u.UP=!1)},39:function(){"keydown"==t&&(u.RIGHT=!0),"keyup"==t&&(u.RIGHT=!1)},40:function(){"keydown"==t&&(u.DOWN=!0),"keyup"==t&&(u.DOWN=!1)},37:function(){"keydown"==t&&(u.LEFT=!0),"keyup"==t&&(u.LEFT=!1)},32:function(){"keydown"==t&&(u.SPACE=!0),"keyup"==t&&(u.SPACE=!1)}};n[e]&&n[e]()}function m(){var e={UP:function(){var e=a.renderData.position;a.renderData.position=e-a.w>-1?e-a.w:e},RIGHT:function(){var e=a.renderData.position;e+1<=a.w*a.h-1&&(e+1)%a.w!=0&&(a.renderData.position=e+1)},DOWN:function(){var e=a.renderData.position,t=Math.round((e-e%a.w)/a.w);e+a.w<a.w*a.h&&(a.renderData.position=t<a.h?e+a.w:e)},LEFT:function(){var e=a.renderData.position;e-1>-1&&e%a.w!=0&&(a.renderData.position=e-1)},SPACE:function(){v()}};for(var t in u)1==u[t]&&e[t](),document.getElementById("debug").innerHTML=JSON.stringify(T(a.renderData.position),null,2);M("PLAYER_MOVE")}function p(e){var t=a.renderData.object,n=a.objQuantity;if(e)for(var i=0;i<n;i++)t.push(Math.floor(Math.random()*a.w));for(var o in t){t[o];t[o]=t[o]+a.w}for(var o in t)t[o]>a.w*a.h-1&&t.splice(o,1)}function v(){var e=a.renderData.bullet;e.includes(a.renderData.position-a.w)||e.push(a.renderData.position-a.w)}function w(e){var t=a.renderData.enemyBullet;t.includes(e+a.w)||t.push(e+a.w)}function g(){var e=a.renderData.bullet,t=a.renderData.enemyBullet;for(var n in e)e[n]=e[n]-a.w,e[n]<0&&e.splice(n,1);for(var n in t)t[n]=t[n]+a.w,t[n]>a.w*a.h+1&&t.splice(n,1)}function y(e,t){for(var n in e)e[n]==t&&e.splice(n,1)}function D(e){var n=e.viewDom;t.default[e.lookType](e.position).forEach(function(e,t){var i=T(e);n.beginPath(),n.rect(i.x-a.pixelWeigth/2,i.y,a.pixelWeigth,a.pixelWeigth+1),n.fillStyle="white",n.fill()})}function E(e){localStorage.getItem("bestScore");var t=localStorage.getItem("bestMileage")||0;if(a.renderData.position||0===a.renderData.position||(a.renderData.position=a.w*Math.floor(a.h/2)-Math.floor(a.w/2)),"OBJ_MOVE"===e){if(l==d){for(var n=0;n<a.objQuantity;n++){var i=new c({name:"ZARK-ZERO",life:3,position:Math.floor(Math.random()*a.w),shot:!0,shotTime:3,movePath:"gostMove",moveTime:5,look:"zark"});a.renderData.enemy.push(i)}d=l+Math.floor(Math.random()*a.objPolling[1]+a.objPolling[0])}p(!1),t<++l&&localStorage.setItem("bestMileage",l)}"BULLET_MOVE"===e&&g();var o=document.getElementById("view").getContext("2d");o.clearRect(0,0,window.innerWidth,window.innerHeight),a.renderData.aniEffect.forEach(function(e){e(o)});var r=a.renderData.enemyBullet,u=document.getElementById("bulletImg");a.renderData.bullet.map(function(e){var t=T(e);o.drawImage(u,t.x-6.5,t.y-5,13,64),r.includes(e)&&(r.splice(r.indexOf(e),1),a.renderData.bullet.splice(a.renderData.bullet.indexOf(e),1)),r.includes(e+a.w)&&(r.splice(r.indexOf(e+a.w),1),a.renderData.bullet.splice(a.renderData.bullet.indexOf(e),1)),a.renderData.enemy.map(function(t){t.wasHit(e,o,function(){a.renderData.bullet.splice(a.renderData.bullet.indexOf(e),1)}),t.wasHit(e+a.w,o,function(){a.renderData.bullet.splice(a.renderData.bullet.indexOf(e),1)})})}),D({viewDom:o,lookType:"MK-2",position:a.renderData.position});var h=document.getElementById("enemyImg");a.renderData.enemyBullet.map(function(e){var t=T(e);o.drawImage(h,t.x-7.5,t.y-5,15,15)}),a.renderData.enemy.map(function(t){t.action(e,o)}),document.getElementById("score").innerHTML='Score: <div class="score">'+s+"</div><br/>Best score: "+(localStorage.getItem("bestScore")||0)+"<br/> Mileage: "+l+"<br/> Best Mileage: "+t;b(a.renderData.position,"MK-2")&&(l=0,d=20,a.renderData.renderTemp={},s=0,!0,console.log("dead"))}function b(e,n){var i=!1;return a.renderData.enemyBullet.forEach(function(o){t.default[n](e).includes(o)&&(i=!0)}),a.renderData.enemy.map(function(o){t.default[n](e).includes(o.position)&&(i=!0)}),i}function M(e){E(e)}function T(e){var t=e%a.w,n=Math.round((e-t)/a.w);return{ps:e,x:t*a.pixelWeigth+a.pixelWeigth/2,y:n*window.innerHeight/a.h,__x:t,__y:n,limit:a.w*a.h-1}}function I(e){(e=e||window.event).preventDefault();var t=Math.floor(e.touches[0].pageX/a.pixelWeigth),n=Math.floor(e.touches[0].pageY/a.pixelWeigth),i=a.w*n+t;a.renderData.position=i,v(),document.getElementById("debug").innerHTML="Touch moved ("+t+","+n+"), "+(a.w*n+t)}document.addEventListener("keydown",function(e){f(e.keyCode,"keydown")},!1),document.addEventListener("keyup",function(e){f(e.keyCode,"keyup")},!1),document.addEventListener("touchstart",I,!1),document.addEventListener("touchmove",I,!1),document.addEventListener("touchend",I,!1),document.getElementById("view").height=window.innerHeight,document.getElementById("view").width=window.innerWidth,setInterval(function(){M("OBJ_MOVE")},a.renderTime),setInterval(function(){M("BULLET_MOVE"),m()},a.bulletTime);
},{"./js/lookPath":17,"./js/movePathList":18,"./js/aniEffectMethod":19,"./js/config":20}]},{},[14])