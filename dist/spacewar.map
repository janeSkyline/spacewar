{"version":3,"sources":["js\\config.js","js\\lookPath.js","js\\movePathList.js","js\\aniEffectMethod.js","js\\positionMethod.js","js\\enemyBulletType.js","js\\createEnemy.js","js\\script.js","js\\shipBulletType.js","js\\createShip.js","js\\createItem.js","index.js","..\\..\\AppData\\Roaming\\npm\\node_modules\\parcel-bundler\\src\\builtins\\bundle-url.js","..\\..\\AppData\\Roaming\\npm\\node_modules\\parcel-bundler\\src\\builtins\\css-loader.js"],"names":["atc","isMobile","e","n","test","substr","navigator","userAgent","vendor","window","opera","moveFps","bulletFps","controlFps","pixelWeigth","vwidth","innerWidth","innerHeight","vheight","exports","w","Math","floor","h","renderTime","bulletTime","controlTime","moveTime","shipLife","renderData","enemy","enemyBullet","aniEffect","item","ps","rs","push","positionLimit","nowPosition","leftlimt","mainX","rightlimt","goStop","me","getST","position","find","el","index","splice","gostMove","thisY","r","nowY","margin","sin","PI","xMargin","call","goToOut","animation","totalRenCount","aniFn","renCount","fn","viewDom","indexOf","circle","x","y","all","now","ang","cos","positionToXY","round","__x","__y","limit","xyToPosition","_x","positionTosXsY","sXsYToPosition","sx","sy","normal","bulletPs","time","prePs","count","taPs","p0","p1","t","_p0","_p1","realX","realY","look","clear","track","marginX","marginY","obj","name","life","shot","shotTime","movePath","bulletType","deadCb","hit","survivalTime","wasHit","cb","includes","bestScore","localStorage","getItem","dead","grapic","color","forEach","psObj","beginPath","rect","fillStyle","fill","action","renderType","shipPs","enemyMove","shotCount","shotByEnemy","deadPs","explosion","document","getElementById","drawImage","bulletArr","dataFn","reduce","data","reCount","ruleObj","rule","script","Object","keys","key","Zark0","Zark1","Fort0","GreenPoint","restoreLife","effect","ship","i","nowPs","fillRect","hp_1","TrebleBullet","changeBullet","enemyPolling","enemyQuantity","arr","pathFn","realPosition","treble","deadPosition","killCount","bullet","isDead","shotFps","maxLife","bulletIndex","touchEnemy","shipPath","bind","shotPositon","margin1","random","margin2","margin3","margin4","ap0","ax","ay","bx","by","_","_wasHit","path","bulletPosition","grapicBullet","enemyMap","total","itemMap","touchItem","wasPickUp","enemyBulleArr","thisBullet","map","bulletImg","itemMove","length","val","split","restoreLifeAction","type","value","actionMap","liftReset","liftMax","parseInt","liftRestore","nextPolling","bgCount","shotFn","keyType","UP","RIGHT","DOWN","LEFT","SPACE","keyCodeMap","keycode","actionMove","shotDriver","closeShot","setInterval","clearInterval","gaphic","TYPE","bestMileage","shipLookType","createObj","enemyObj","setItem","itemData","getContext","clearRect","bullt","bulletObj","enemyImg","style","backgroundPositionY","innerHTML","width","render","addEventListener","keyCode","touchAction","event","preventDefault","touches","pageX","pageY","_ps","height","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","Date","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","querySelectorAll","module"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kBC+Ic,UAAUG,OAAV,EAAmBC,OAAnB,EAA4B;AACzC,MAAIC,OAAOC,OAAOH,OAAP,CAAX;AACA,MAAIE,IAAJ,EAAU;AACRE,WAAOC,IAAP,CAAYH,IAAZ,EAAkBvB,OAAlB,CAA0B,UAAU2B,GAAV,EAAe;AACvCL,cAAQK,GAAR,IAAeJ,KAAKI,GAAL,CAAf;AACD,KAFD;AAGD;AACF;;AAhLD;;AAKA;;;;AACA;;AAIA;;;;AAMA;AACA,IAAIC,QAAQ;AACV9C,QAAM,WADI;AAEVC,QAAM,CAFI;AAGV;AACAC,QAAM,IAJI;AAKVC,YAAU,CAAC,GAAD,EAAM,EAAN,EAAU,CAAV,CALA;AAMVC,YAAU,UANA;AAOVjF,YAAU,CAPA;AAQVuE,QAAM,MARI;AASVW,cAAY;AATF,CAAZ;;AAYA,IAAI0C,QAAQ;AACV/C,QAAM,WADI;AAEVC,QAAM,CAFI;AAGV;AACAC,QAAM,IAJI;AAKVC,YAAU,CAAC,GAAD,EAAM,EAAN,EAAU,CAAV,CALA;AAMVC,YAAU,UANA;AAOVjF,YAAU,CAPA;AAQVuE,QAAM,MARI;AASVW,cAAY;AATF,CAAZ;;AAYA,IAAI2C,QAAQ;AACVhD,QAAM,MADI;AAEVC,QAAM,CAFI;AAGV;AACAC,QAAM,IAJI;AAKVC,YAAU,CAAC,GAAD,EAAM,EAAN,EAAU,CAAV,CALA;AAMVC,YAAU,SANA;AAOVjF,YAAU,CAPA;AAQVuE,QAAM,MARI;AASVW,cAAY;;AAId;AACA;AACA;;AAfY,CAAZ,CAiBA,IAAI4C,aAAa;AACfjD,QAAM,YADS;AAEfI,YAAU,SAFK;AAGfjF,YAAU,EAHK;AAIf+H,eAAa,CAAC,WAAD,EAAc,WAAd,CAJE;AAKfxD,QAAM,KALS;AAMfuB,SAAO,iBANQ;AAOfkC,UAAQ,gBAAUC,IAAV,EAAgB;AACtB,uBAAW5H,SAAX,CAAqBI,IAArB,CACE,gCAAU,EAAV,EAAc,UAAU2B,QAAV,EAAoBE,OAApB,EAA6B;AACzC,UAAI0B,KAAK,kCAAaiE,KAAK/G,QAAlB,CAAT;AACA,UAAIyB,MAAM,CAAV;AACA,WAAK,IAAIuF,IAAI,CAAb,EAAgBA,KAAKvF,GAArB,EAA0BuF,GAA1B,EAA+B;AAC7B,YAAIC,QAAQ,6BAAOnE,GAAGvB,CAAV,EAAYuB,GAAGtB,CAAf,EAAkB,MAAIN,QAAtB,EAAgCO,GAAhC,EAAqCuF,CAArC,CAAZ;AACA5F,gBAAQ6D,SAAR,GAAoB,kBAApB;AACA7D,gBAAQ8F,QAAR,CAAiBD,MAAM1F,CAAvB,EAA0B0F,MAAMzF,CAAhC,EAAmC,EAAnC,EAAuC,EAAvC;AACD;AACF,KARD,CADF;AAWD;AAnBc,CAAjB;;AAsBA,IAAI2F,OAAO;AACTxD,QAAM,YADG;AAETI,YAAU,SAFD;AAGTjF,YAAU,EAHD;AAIT+H,eAAa,CAAC,eAAD,CAJJ;AAKTxD,QAAM,KALG;AAMTuB,SAAO,mBANE;AAOTkC,UAAQ,gBAAUC,IAAV,EAAgB;AACtB,uBAAW5H,SAAX,CAAqBI,IAArB,CACE,gCAAU,EAAV,EAAc,UAAU2B,QAAV,EAAoBE,OAApB,EAA6B;AACzC,UAAI0B,KAAK,kCAAaiE,KAAK/G,QAAlB,CAAT;AACA,UAAIyB,MAAM,CAAV;AACA,WAAK,IAAIuF,IAAI,CAAb,EAAgBA,KAAKvF,GAArB,EAA0BuF,GAA1B,EAA+B;AAC7B,YAAIC,QAAQ,6BAAOnE,GAAGvB,CAAV,EAAYuB,GAAGtB,CAAf,EAAkB,MAAIN,QAAtB,EAAgCO,GAAhC,EAAqCuF,CAArC,CAAZ;AACA5F,gBAAQ6D,SAAR,GAAoB,oBAApB;AACA7D,gBAAQ8F,QAAR,CAAiBD,MAAM1F,CAAvB,EAA0B0F,MAAMzF,CAAhC,EAAmC,EAAnC,EAAuC,EAAvC;AACD;AACF,KARD,CADF;AAWD;AAnBQ,CAAX;;AAsBA,IAAI4F,eAAe;AACjBzD,QAAM,YADW;AAEjBI,YAAU,SAFO;AAGjBjF,YAAU,EAHO;AAIjBuI,gBAAa,QAJI;AAKjBhE,QAAM,KALW;AAMjBuB,SAAO,iBANU;AAOjBkC,UAAQ,gBAAUC,IAAV,EAAgB;AACtB,uBAAW5H,SAAX,CAAqBI,IAArB,CACE,gCAAU,EAAV,EAAc,UAAU2B,QAAV,EAAoBE,OAApB,EAA6B;AACzC,UAAI0B,KAAK,kCAAaiE,KAAK/G,QAAlB,CAAT;AACA,UAAIyB,MAAM,CAAV;AACA,WAAK,IAAIuF,IAAI,CAAb,EAAgBA,KAAKvF,GAArB,EAA0BuF,GAA1B,EAA+B;AAC7B,YAAIC,QAAQ,6BAAOnE,GAAGvB,CAAV,EAAYuB,GAAGtB,CAAf,EAAkB,MAAIN,QAAtB,EAAgCO,GAAhC,EAAqCuF,CAArC,CAAZ;AACA5F,gBAAQ6D,SAAR,GAAoB,kBAApB;AACA7D,gBAAQ8F,QAAR,CAAiBD,MAAM1F,CAAvB,EAA0B0F,MAAMzF,CAAhC,EAAmC,EAAnC,EAAuC,EAAvC;AACD;AACF,KARD,CADF;AAWD;AAnBgB,CAAnB;;AAsBA,IAAI6E,SAAS;AACX,KAAG;AACDpH,WAAO,CAACwH,KAAD,CADN;AAEDa,kBAAc,CAAC,EAAD,EAAK,GAAL,CAFb;AAGDC,mBAAe;AAHd,GADQ;AAMX,OAAK;AACHtI,WAAO,CAACwH,KAAD,EAAQE,KAAR,CADJ;AAEHW,kBAAc,CAAC,EAAD,EAAK,EAAL,CAFX;AAGHC,mBAAe;AAHZ,GANM;AAWX,QAAM;AACJtI,WAAO,CAACyH,KAAD,EAAQC,KAAR,CADH;AAEJW,kBAAc,CAAC,EAAD,EAAK,EAAL,CAFV;AAGJC,mBAAe;AAHX,GAXK;AAgBX,QAAM;AACJnI,UAAM,CAACwH,UAAD;AADF,GAhBK;AAmBX,QAAK;AACHxH,UAAM,CAAC+H,IAAD;AADH,GAnBM;AAsBX,QAAK;AACH/H,UAAM,CAACgI,YAAD;AADH,GAtBM;AAyBX,QAAK;AACHnI,WAAO,CAACyH,KAAD,EAAQC,KAAR,CADJ;AAEHW,kBAAc,CAAC,EAAD,EAAK,EAAL,CAFX;AAGHlI,UAAM,CAACwH,UAAD;AAHH,GAzBM;AA8BX,QAAK;AACHxH,UAAM,CAAC+H,IAAD;AADH,GA9BM;AAiCX,QAAK;AACHG,kBAAc,CAAC,EAAD,EAAK,EAAL;AADX,GAjCM;AAoCX,QAAK;AACHlI,UAAM,CAAC+H,IAAD;AADH,GApCM;AAuCX,QAAK;AACHG,kBAAc,CAAC,EAAD,EAAK,EAAL;AADX;;AAvCM,CAAb;;AAoDC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","file":"spacewar.map","sourcesContent":["var atc = {\r\n  isMobile: function () {\r\n    var e = !1;\r\n    return function (n) {\r\n      (/(android|bb\\d+|meego).+mobile|iPad|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|webgolds|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(n.substr(0, 4))) && (e = !0)\r\n    }(navigator.userAgent || navigator.vendor || window.opera), e\r\n  }\r\n};\r\nvar moveFps = atc.isMobile() ? 40 : 40;\r\nvar bulletFps = atc.isMobile() ? 30 : 30;\r\nvar controlFps = atc.isMobile() ? 60 : 40;\r\nvar pixelWeigth = atc.isMobile() ? 10 : 15;\r\nvar vwidth = atc.isMobile() ? window.innerWidth : window.innerHeight >= window.innerWidth ? window.innerWidth : window.innerHeight/4*3;\r\nvar vheight = window.innerHeight;\r\n\r\nexports.atc = atc;\r\nexports.moveFps = moveFps;\r\nexports.bulletFps = bulletFps;\r\nexports.controlFps = controlFps;\r\nexports.pixelWeigth = pixelWeigth;\r\nexports.vwidth = vwidth;\r\nexports.vheight = vheight;\r\nexports.w = Math.floor(vwidth / pixelWeigth);\r\nexports.h = Math.floor(vheight / pixelWeigth);\r\nexports.renderTime = 1000 / moveFps;\r\nexports.bulletTime = 1000 / bulletFps;\r\nexports.controlTime = 1000 / controlFps;\r\nexports.moveTime = 1000 / 30;\r\nexports.shipLife = 5;\r\nexports.renderData = {\r\n  enemy: [],\r\n  enemyBullet: [],\r\n  aniEffect:[],\r\n  item:[],\r\n};","import { w } from './config';\r\nexport default {\r\n  'zark': function (ps) {\r\n    var rs = [ps];\r\n    if (ps % w !== w - 1) {\r\n      rs.push(ps - w + 1);\r\n    }\r\n    if (ps % w !== 0 || ps == 0) {\r\n      rs.push(ps - w - 1);\r\n    }\r\n    return rs;\r\n  },\r\n  'fort': function (ps) {\r\n    var rs = [ps];\r\n    if (ps % w !== w - 1) {\r\n      rs.push(ps - w + 1);\r\n    }\r\n    if (ps % w !== 0 || ps == 0) {\r\n      rs.push(ps - w - 1);\r\n    }\r\n    if (ps - 2 * w > 0) {\r\n      rs.push(ps - 2 * w);\r\n    }\r\n    return rs;\r\n  },\r\n  'point': function (ps) {\r\n    return [ps];\r\n  },\r\n  'hp+': function (ps) {\r\n    var rs = [];\r\n    if (ps % w - 1 > 0) {\r\n      rs = [...rs, (ps - w) - 1, (ps + w) - 1];\r\n    }\r\n    if (ps % w + 1 < w) {\r\n      rs = [...rs, (ps - w) + 1, (ps + w) + 1];\r\n    }\r\n    return rs;\r\n  },\r\n  'MK-1': function (ps) {\r\n    var rs = [ps, ps + w, ps + 3 * w];\r\n    if (ps % w !== w - 1) {\r\n      rs.push(ps + 2 * w + 1);\r\n      rs.push(ps + 3 * w + 2);\r\n      rs.push(ps + 4 * w + 1);\r\n    }\r\n    if (ps % w !== 0) {\r\n      rs.push(ps + 2 * w - 1);\r\n      rs.push(ps + 3 * w - 2);\r\n      rs.push(ps + 4 * w - 1);\r\n    }\r\n    return rs;\r\n  },\r\n  'MK-2': function (ps) {\r\n    var rs = [ps, ps + w, ps + 3 * w];\r\n    if (ps % w !== w - 1) {\r\n      rs.push(ps + 2 * w + 1);\r\n    }\r\n    if (ps % w !== 0) {\r\n      rs.push(ps + 2 * w - 1);\r\n    }\r\n    return rs;\r\n  },\r\n  'MK-3': function (ps) {\r\n    var rs = [ps, ps + w, ps + 2 * w, ps + 4 * w,];\r\n    if (ps % w !== w - 1) {\r\n      rs.push(ps + 2 * w + 1);\r\n      rs.push(ps + 3 * w + 1);\r\n    }\r\n    if (ps % w !== 0) {\r\n      rs.push(ps + 2 * w - 1);\r\n      rs.push(ps + 3 * w - 1);\r\n    }\r\n    return rs;\r\n  },\r\n};","import { \r\n  w,\r\n  h,\r\n  renderData \r\n} from './config';\r\n\r\nfunction positionLimit(nowPosition) {\r\n  var leftlimt = this.mainX - (this.mainX % w);\r\n  var rightlimt = leftlimt + w - 1;\r\n  \r\n  if (nowPosition > rightlimt) {\r\n    this.mainX -= 1;\r\n    return -1;\r\n  }\r\n  if (nowPosition < leftlimt) {\r\n    this.mainX += 1;\r\n    return -1;\r\n  }\r\n  this.mainX += w;\r\n  return nowPosition;\r\n};\r\n\r\nexport default {\r\n  goStop: function () {\r\n    var me = this;\r\n    if (this.getST() < 6) this.position += w;\r\n    if (this.getST() > 80) this.position += w;\r\n    if (this.position > w * h - 1) {\r\n      renderData.enemy.find(function (el, index) {\r\n        if (el === me) renderData.enemy.splice(index, 1);\r\n      })\r\n    };\r\n  },\r\n  gostMove: function () {\r\n    var me = this;\r\n    var thisY = Math.floor(this.position / h);\r\n    var r = h / 4;\r\n    var nowY = Math.floor(this.mainX / w);\r\n    var margin = Math.sin(Math.PI / r * nowY);\r\n    var xMargin = Math.floor(margin * r);\r\n    //console.log(nowY, margin);\r\n    this.position = positionLimit.call(this, this.mainX + xMargin);\r\n    while( this.position == -1 ) {\r\n      　this.position = positionLimit.call(this, this.mainX + xMargin)\r\n    }\r\n    if (this.position > w * h - 1) {\r\n      renderData.enemy.find(function (el, index) {\r\n        if (el === me) renderData.enemy.splice(index, 1);\r\n      })\r\n    };\r\n  },\r\n  goToOut: function () {\r\n    this.position += w;\r\n    var me = this;\r\n    if (this.position > w * h - 1) {\r\n      renderData.enemy.find(function (el, index) {\r\n        if (el === me) renderData.enemy.splice(index, 1);\r\n      })\r\n    };\r\n  },\r\n};","import { renderData } from './config';\r\nexports.animation = function (totalRenCount, aniFn) {\r\n  var renCount = 1;\r\n  var fn = function (viewDom) {\r\n    if (renCount == totalRenCount) {\r\n      renderData.aniEffect.splice(renderData.aniEffect.indexOf(fn), 1);\r\n    }\r\n    aniFn(renCount, viewDom);\r\n    renCount++;\r\n  }\r\n  return fn;\r\n};\r\n\r\nexports.circle = function (x, y, r, all, now) {\r\n  var ang = Math.PI *2/all;\r\n  return {\r\n    x: x + r * Math.cos(ang*now),\r\n    y: y + r * Math.sin(ang*now),\r\n  }\r\n}","import {\r\n  w,\r\n  h,\r\n  pixelWeigth,\r\n} from './config';\r\n\r\nexports.positionToXY = function (ps) {\r\n  var x = ps % w;\r\n  var y = Math.round((ps - x) / w);\r\n  return {\r\n    ps: ps,\r\n    x: x * pixelWeigth + pixelWeigth / 2,\r\n    y: y * window.innerHeight / h,\r\n    __x: x,\r\n    __y: y,\r\n    limit: w * h - 1,\r\n  };\r\n}\r\n\r\nexports.xyToPosition = function (x,y) {\r\n  var _x = (x - pixelWeigth / 2) / pixelWeigth;\r\n  var rs = y/pixelWeigth * w + _x;\r\n  return rs;\r\n}\r\n\r\nexports.positionTosXsY = function (position) {\r\n  var x = position % w;\r\n  var y = Math.round((position - x) / w);\r\n  return {\r\n    x:x,\r\n    y:y\r\n  };\r\n}\r\n\r\nexports.sXsYToPosition = function(sx,sy){\r\n  return sy*w+sx;\r\n}\r\n","import { w, h, pixelWeigth } from './config';\r\nimport {\r\n  positionToXY,\r\n  positionTosXsY,\r\n  sXsYToPosition,\r\n} from './positionMethod';\r\n\r\nexport default {\r\n  normal: function (bulletPs, time) {\r\n    var time = 45;\r\n    var prePs = bulletPs;\r\n    var count = time;\r\n    return function (taPs) {\r\n      count--;\r\n      var p0 = positionTosXsY(prePs);\r\n      var p1 = positionTosXsY(prePs + w * h);\r\n      var t = 1 / time * (time - count);\r\n\r\n      var x = Math.round(p0.x + (p1.x - p0.x) * t);\r\n      var y = Math.round(p0.y + (p1.y - p0.y) * t);\r\n\r\n      var _p0 = positionToXY(prePs);\r\n      var _p1 = positionToXY(prePs + w * h);\r\n      var t = 1 / time * (time - count);\r\n      var realX = _p0.x + (_p1.x - _p0.x) * t;\r\n      var realY = _p0.y + (_p1.y - _p0.y) * t;\r\n\r\n      return {\r\n        position: sXsYToPosition(x, y),\r\n        x: realX,\r\n        y: realY,\r\n        look: 'laser',\r\n        w: 20,\r\n        h: 60,\r\n        clear: count < -1,\r\n      }\r\n    }\r\n  },\r\n  track: function (bulletPs, time) {\r\n    var prePs = bulletPs;\r\n    var count = time || 30;\r\n    var p1 = null;\r\n    var _p1 = null;\r\n    return function (taPs) {\r\n      var p0 = positionTosXsY(prePs);\r\n      if (!p1) p1 = positionTosXsY(taPs);\r\n      var t = 1 / 30 * (30 - count);\r\n      var x = Math.round(p0.x + (p1.x - p0.x) * t);\r\n      var y = Math.round(p0.y + (p1.y - p0.y) * t);\r\n\r\n      var _p0 = positionToXY(prePs);\r\n      var marginX = pixelWeigth / 2;\r\n      var marginY = 0;\r\n      if (!_p1) _p1 = positionToXY(taPs);\r\n      var t = 1 / 30 * (30 - count);\r\n      var realX = (_p0.x + marginX + (_p1.x - _p0.x + marginX) * t);\r\n      var realY = (_p0.y + marginY + (_p1.y - _p0.y + marginY) * t);\r\n      count--;\r\n\r\n      return {\r\n        position: sXsYToPosition(x, y),\r\n        x: realX,\r\n        y: realY,\r\n        look: 'bulletBall',\r\n        w: 15,\r\n        h: 15,\r\n        clear: count < -15 || x < 0 || x > w - 1,\r\n      }\r\n    }\r\n  },\r\n}","import lookPath from './lookPath';\r\nimport movePathList from './movePathList';\r\nimport { animation } from './aniEffectMethod';\r\nimport { positionToXY } from './positionMethod';\r\nimport bulletTypeMap from './enemyBulletType';\r\nimport {\r\n  w,\r\n  h,\r\n  pixelWeigth,\r\n  renderData,\r\n  killCount,\r\n} from './config';\r\n\r\nfunction enemyMove() {\r\n  if (movePathList[this.movePath] && this.getST() % this.moveTime == 0) movePathList[this.movePath].call(this);\r\n}\r\n\r\nfunction shotByEnemy(position, bulletType, shipPs) {\r\n  var bulletArr = renderData.enemyBullet;\r\n  var dataFn = bulletTypeMap[bulletType](position);\r\n  if ( !bulletArr.reduce(function (rs, el) { return rs || (el.data.position === position) }, false) ) {\r\n    bulletArr.push({\r\n      data: dataFn(shipPs),\r\n      fn: dataFn,\r\n    })\r\n  };\r\n}\r\n\r\nexport default function (obj) {\r\n  this.name = obj.name; //名字\r\n  this.life = obj.life; //生命值\r\n  this.mainX = obj.position;\r\n  this.position = obj.position; //位置\r\n  this.shot = obj.shot; //會不會發射子彈\r\n  this.shotTime = obj.shotTime; //連發數\r\n  this.movePath = obj.movePath; //移動的路徑類型\r\n  this.moveTime = obj.moveTime || 1; // 移動間隔\r\n  this.look = obj.look;\r\n  this.bulletType = obj.bulletType || 'normal';\r\n\r\n  var deadCb = obj.deadCb || function () { };\r\n  var hit = false;\r\n  var survivalTime = 0;\r\n\r\n  this.getST = function () {\r\n    return survivalTime;\r\n  };\r\n  this.wasHit = function (bulletPs, viewDom, cb) {\r\n    var me = this;\r\n    if (lookPath[this.look](this.position).includes(bulletPs)) {\r\n      hit = true;\r\n      this.life--;\r\n      if (this.life < 1) {\r\n        renderData.enemy.find(function (el, index) {\r\n          if (el === me) {\r\n            var bestScore = localStorage.getItem('bestScore');\r\n            renderData.enemy.splice(index, 1);\r\n          }\r\n        })\r\n        this.dead();\r\n      } else {\r\n        this.grapic.call(this, viewDom);\r\n        if (cb) cb();\r\n      };\r\n    }\r\n  };\r\n\r\n  this.grapic = function (viewDom) {\r\n    var color = hit ? 'red' : 'white';\r\n    lookPath[this.look](this.position).forEach(function (ps, index) {\r\n      var psObj = positionToXY(ps);\r\n      viewDom.beginPath();\r\n      viewDom.rect(psObj.x - pixelWeigth / 2, psObj.y, pixelWeigth, pixelWeigth);\r\n      viewDom.fillStyle = color;\r\n      viewDom.fill();\r\n    });\r\n  };\r\n\r\n  this.action = function (renderType, viewDom, shipPs) {\r\n    this.grapic(viewDom);\r\n    if (renderType === 'OBJ_MOVE') {\r\n      enemyMove.call(this);\r\n      if (survivalTime % this.shotTime[0] < this.shotTime[1]) {\r\n        var shotCount = survivalTime % this.shotTime[0];\r\n        if (shotCount % this.shotTime[2] == 0) {\r\n          this.shot && shotByEnemy(this.position, this.bulletType, shipPs);\r\n        }\r\n      };\r\n      survivalTime++;\r\n      hit = false;\r\n    }\r\n  };\r\n\r\n  this.dead = function () {\r\n    var position = this.position;\r\n    var deadPs = positionToXY(position);\r\n    var explosion = document.getElementById(\"explosion\");\r\n    renderData.aniEffect.push(\r\n      animation(50, function (renCount, viewDom) {\r\n        viewDom.drawImage(explosion, deadPs.x - (50 - renCount) / 2, deadPs.y, 120 - renCount, 120 - renCount);\r\n      })\r\n    );\r\n    deadCb();\r\n  }\r\n\r\n}","import {\r\n  w,\r\n  pixelWeigth,\r\n  renderData\r\n} from './config';\r\nimport createEnemy from './createEnemy';\r\nimport {\r\n  animation,\r\n  circle\r\n} from './aniEffectMethod';\r\nimport {\r\n  positionToXY,\r\n  positionTosXsY,\r\n  sXsYToPosition\r\n} from './positionMethod';\r\n\r\n// enemy\r\nvar Zark0 = {\r\n  name: 'ZARK-ZERO',\r\n  life: 1,\r\n  // position: Math.floor(Math.random() * w),\r\n  shot: true,\r\n  shotTime: [200, 54, 9],\r\n  movePath: 'gostMove',\r\n  moveTime: 5,\r\n  look: 'zark',\r\n  bulletType: 'normal',\r\n}\r\n\r\nvar Zark1 = {\r\n  name: 'ZARK-PLUS',\r\n  life: 1,\r\n  // position: Math.floor(Math.random() * w),\r\n  shot: true,\r\n  shotTime: [200, 81, 9],\r\n  movePath: 'gostMove',\r\n  moveTime: 3,\r\n  look: 'zark',\r\n  bulletType: 'normal',\r\n}\r\n\r\nvar Fort0 = {\r\n  name: 'FORT',\r\n  life: 1,\r\n  // position: Math.floor(Math.random() * w),\r\n  shot: true,\r\n  shotTime: [200, 54, 9],\r\n  movePath: 'goToOut',\r\n  moveTime: 5,\r\n  look: 'fort',\r\n  bulletType: 'track',\r\n}\r\n\r\n\r\n// enhancing item\r\n// restoreLife:['liftReset','liftMax-6','liftRestore-6'],\r\n// changeBullet:[],\r\n\r\nvar GreenPoint = {\r\n  name: 'greenPoint',\r\n  movePath: 'goToOut',\r\n  moveTime: 10,\r\n  restoreLife: ['liftMax-2', 'liftReset'],\r\n  look: 'hp+',\r\n  color: 'rgba(0,255,0,1)',\r\n  effect: function (ship) {\r\n    renderData.aniEffect.push(\r\n      animation(80, function (renCount, viewDom) {\r\n        var p0 = positionToXY(ship.position);\r\n        var all = 5;\r\n        for (var i = 1; i <= all; i++) {\r\n          var nowPs = circle(p0.x,p0.y, 1.5*renCount, all, i)\r\n          viewDom.fillStyle = 'rgba(0,255,0,.8)';\r\n          viewDom.fillRect(nowPs.x, nowPs.y, 15, 15);       \r\n        }\r\n      })\r\n    );\r\n  },\r\n}\r\n\r\nvar hp_1 = {\r\n  name: 'greenPoint',\r\n  movePath: 'goToOut',\r\n  moveTime: 10,\r\n  restoreLife: ['liftRestore-1', ],\r\n  look: 'hp+',\r\n  color: 'rgba(255,255,0,1)',\r\n  effect: function (ship) {\r\n    renderData.aniEffect.push(\r\n      animation(80, function (renCount, viewDom) {\r\n        var p0 = positionToXY(ship.position);\r\n        var all = 5;\r\n        for (var i = 1; i <= all; i++) {\r\n          var nowPs = circle(p0.x,p0.y, 1.5*renCount, all, i)\r\n          viewDom.fillStyle = 'rgba(255,255,0,.8)';\r\n          viewDom.fillRect(nowPs.x, nowPs.y, 15, 15);       \r\n        }\r\n      })\r\n    );\r\n  },\r\n}\r\n\r\nvar TrebleBullet = {\r\n  name: 'greenPoint',\r\n  movePath: 'goToOut',\r\n  moveTime: 10,\r\n  changeBullet:'treble',\r\n  look: 'hp+',\r\n  color: 'rgba(255,0,0,1)',\r\n  effect: function (ship) {\r\n    renderData.aniEffect.push(\r\n      animation(80, function (renCount, viewDom) {\r\n        var p0 = positionToXY(ship.position);\r\n        var all = 5;\r\n        for (var i = 1; i <= all; i++) {\r\n          var nowPs = circle(p0.x,p0.y, 1.5*renCount, all, i)\r\n          viewDom.fillStyle = 'rgba(255,0,0,.8)';\r\n          viewDom.fillRect(nowPs.x, nowPs.y, 15, 15);       \r\n        }\r\n      })\r\n    );\r\n  },\r\n}\r\n\r\nvar script = {\r\n  0: {\r\n    enemy: [Zark0],\r\n    enemyPolling: [20, 100],\r\n    enemyQuantity: 1,\r\n  },\r\n  800: {\r\n    enemy: [Zark0, Fort0],\r\n    enemyPolling: [15, 80],\r\n    enemyQuantity: 1,\r\n  },\r\n  1600: {\r\n    enemy: [Zark1, Fort0],\r\n    enemyPolling: [15, 75],\r\n    enemyQuantity: 1,\r\n  },\r\n  1601: {\r\n    item: [GreenPoint],\r\n  },\r\n  1800:{\r\n    item: [hp_1],\r\n  },\r\n  3000:{\r\n    item: [TrebleBullet],\r\n  },\r\n  3100:{\r\n    enemy: [Zark1, Fort0],\r\n    enemyPolling: [15, 55],\r\n    item: [GreenPoint],\r\n  },\r\n  4400:{\r\n    item: [hp_1],\r\n  },\r\n  4500:{\r\n    enemyPolling: [15, 45],\r\n  },\r\n  5600:{\r\n    item: [hp_1],\r\n  },\r\n  5700:{\r\n    enemyPolling: [10, 35],   \r\n  }\r\n\r\n};\r\n\r\nexport default function (reCount, ruleObj) {\r\n  var rule = script[reCount];\r\n  if (rule) {\r\n    Object.keys(rule).forEach(function (key) {\r\n      ruleObj[key] = rule[key];\r\n    })\r\n  }\r\n};\r\n","import { w, h, pixelWeigth } from './config';\r\nimport {\r\n  positionToXY,\r\n  positionTosXsY,\r\n  sXsYToPosition,\r\n} from './positionMethod';\r\n\r\nfunction normal(bulletPs, arr, time) {\r\n  var prePs = bulletPs;\r\n  function pathFn(taPs) {\r\n    prePs -= w;\r\n    var realPosition = positionToXY(prePs);\r\n    return {\r\n      position: prePs,\r\n      x: realPosition.x,\r\n      y: realPosition.y,\r\n      look: 'shipBulletNormal',\r\n      w: 20,\r\n      h: 60,\r\n      clear: prePs < 0,\r\n    }\r\n  }\r\n  arr.push({ data: pathFn(), fn: pathFn });\r\n};\r\n\r\nexport default {\r\n  normal: normal,\r\n  treble: function (bulletPs, arr, time) {\r\n    normal(bulletPs - 1, arr);\r\n    normal(bulletPs, arr);\r\n    normal(bulletPs + 1, arr);\r\n  },\r\n}","import lookPath from './lookPath';\r\nimport movePathList from './movePathList';\r\nimport shipBulletType from './shipBulletType';\r\nimport { animation } from './aniEffectMethod';\r\nimport {\r\n  positionToXY,\r\n  positionTosXsY\r\n} from './positionMethod';\r\nimport {\r\n  w,\r\n  h,\r\n  pixelWeigth,\r\n  renderData,\r\n  killCount,\r\n} from './config';\r\n\r\nfunction bulletPosition() {\r\n  var bulletArr = this.bullet;\r\n  for (var key in bulletArr) {\r\n    bulletArr[key].data = bulletArr[key].fn();\r\n    if (bulletArr[key].data.clear) {\r\n      bulletArr.splice(key, 1);\r\n    };\r\n  }\r\n}\r\n\r\nfunction grapicBullet(viewDom) {\r\n  var enemyBulleArr = renderData.enemyBullet;\r\n\r\n  var thisBullet = this.bullet;\r\n\r\n  thisBullet.map(function (el) {\r\n    var ps = el.data.position;\r\n    var bulletImg = document.getElementById(el.data.look);\r\n\r\n    viewDom.drawImage(bulletImg, el.data.x - 13 / 2, el.data.y - 5, 13, 64);\r\n\r\n    // defense\r\n    enemyBulleArr.forEach(function (enemyBullet, index) {\r\n      if (enemyBullet.data.position === ps) {\r\n        enemyBulleArr.splice(index, 1);\r\n        thisBullet.splice(thisBullet.indexOf(el), 1);\r\n      }\r\n      if (enemyBullet.data.position === ps + w) {\r\n        enemyBulleArr.splice(index, 1);\r\n        thisBullet.splice(thisBullet.indexOf(el), 1);\r\n      }\r\n    });\r\n\r\n    // kill enemy\r\n    renderData.enemy.map(function (obj) {\r\n      obj.wasHit(ps, viewDom, function () {\r\n        thisBullet.splice(thisBullet.indexOf(el), 1);\r\n      });\r\n      obj.wasHit(ps + w, viewDom, function () {\r\n        thisBullet.splice(thisBullet.indexOf(el), 1);\r\n      });\r\n    })\r\n  })\r\n}\r\n\r\nexport default function (obj) {\r\n  this.name = obj.name; //名字\r\n  this.life = obj.life; //生命值\r\n  this.deadPosition = obj.position; //復活位置\r\n  this.position = obj.position; //位置\r\n  this.killCount = 0; //擊殺數\r\n  this.bullet = []; //子彈陣列\r\n  this.bulletType = 'normal';\r\n  this.look = obj.look;\r\n  this.isDead = false;\r\n  this.shotFps = 8;\r\n  this.maxLife = obj.life;\r\n\r\n  var deadCb = obj.deadCb || function () { };\r\n  var hit = false;\r\n\r\n  this.wasHit = function (data) {\r\n    var {\r\n      bulletPs,\r\n      bulletIndex,\r\n      viewDom,\r\n      touchEnemy,\r\n      shipPath \r\n    } = data;\r\n    var me = this;\r\n    if (shipPath.includes(bulletPs) || shipPath.includes(bulletPs + w) || touchEnemy) {\r\n      this.life--;\r\n      renderData.aniEffect.push(\r\n        animation(10, function (renCount, viewDom) {\r\n          shipPath.forEach(function (ps, index) {\r\n            var psObj = positionToXY(ps);\r\n            viewDom.fillStyle = 'rgba(255,0,0,.8)';\r\n            viewDom.fillRect(psObj.x - pixelWeigth / 2, psObj.y, pixelWeigth, pixelWeigth + 1);\r\n          });\r\n        }.bind(this))\r\n      );\r\n      renderData.enemyBullet.splice(bulletIndex, 1);\r\n      if (this.life < 1) {\r\n        this.life = 0;\r\n        this.isDead = true;\r\n        this.dead();\r\n      }\r\n    }\r\n  };\r\n\r\n  this.shot = function () {\r\n    if (!this.isDead) {\r\n      //\r\n      shipBulletType[this.bulletType](this.position, this.bullet);\r\n      //\r\n      var shotPositon = this.position;\r\n      renderData.aniEffect.push(\r\n        animation(30, function (renCount, viewDom) {\r\n          var margin1 = 4 + Math.random() * 20;\r\n          var margin2 = 4 + Math.random() * 20;\r\n          var margin3 = Math.random() * 5;\r\n          var margin4 = Math.random() * 5;\r\n          var ap0 = positionToXY(shotPositon);\r\n          var t = 1 / 30 * (30 - renCount);\r\n\r\n          var ax = (1 - t) * (1 - t) * ap0.x + 2 * t * (1 - t) * ap0.x + t * t * (ap0.x - margin1);\r\n          var ay = (1 - t) * (1 - t) * ap0.y + 2 * t * (1 - t) * (ap0.y - margin1) + t * t * (ap0.y - margin1);\r\n          var bx = (1 - t) * (1 - t) * ap0.x + 2 * t * (1 - t) * ap0.x + t * t * (ap0.x + margin2);\r\n          var by = (1 - t) * (1 - t) * ap0.y + 2 * t * (1 - t) * (ap0.y - margin2) + t * t * (ap0.y - margin2);\r\n\r\n          viewDom.fillStyle = renCount % 2 ? 'rgba(255,255,255,.8)' : 'rgba(255,255,0,.8)';\r\n          viewDom.fillRect(ax - margin3, ay, 3, 3);\r\n          viewDom.fillRect(bx + margin4, by, 3, 3);\r\n        })\r\n      );\r\n\r\n    }\r\n  };\r\n\r\n  this.grapic = function (viewDom) {\r\n    var _ = this;\r\n    var _wasHit = this.wasHit.bind(this);\r\n    var isDead = this.isDead;\r\n    var path = lookPath[this.look](this.position);\r\n    bulletPosition.call(this);\r\n    grapicBullet.call(this, viewDom);\r\n\r\n    if (!isDead) {\r\n      lookPath[this.look](this.position).forEach(function (ps, index) {\r\n        var psObj = positionToXY(ps);\r\n        viewDom.beginPath();\r\n        viewDom.rect(psObj.x - pixelWeigth / 2, psObj.y, pixelWeigth, pixelWeigth + 1);\r\n        viewDom.fillStyle = 'white';\r\n        viewDom.fill();\r\n      });\r\n\r\n      //hit or touchEnemy\r\n      var enemyMap = renderData.enemy.reduce(function (total, el) {\r\n        return [...total, ...lookPath[el.look](el.position)]\r\n      }, []);\r\n      var touchEnemy = path.reduce(function (total, el) {\r\n        return total || enemyMap.includes(el);\r\n      }, false);\r\n      renderData.enemyBullet.forEach(function (bullet, index) {\r\n        _wasHit({\r\n          bulletPs: bullet.data.position,\r\n          bulletIndex: index,\r\n          viewDom: viewDom,\r\n          touchEnemy: touchEnemy,\r\n          shipPath: path,\r\n        });\r\n      })\r\n\r\n      // touch item\r\n      renderData.item.forEach(function(item, index){\r\n        var itemMap = lookPath[item.look](item.position);\r\n        var touchItem = path.reduce(function (total, el) {\r\n          return total || itemMap.includes(el);\r\n        }, false);  \r\n\r\n        if(touchItem){\r\n          item.wasPickUp(_);\r\n        }\r\n      })      \r\n\r\n    }\r\n  };\r\n\r\n  this.dead = function () {\r\n    var position = this.position;\r\n    var deadPs = positionToXY(position);\r\n    var explosion = document.getElementById(\"explosion\");\r\n    renderData.aniEffect.push(\r\n      animation(50, function (renCount, viewDom) {\r\n        viewDom.drawImage(explosion, deadPs.x - (50 - renCount) / 2, deadPs.y, 120 - renCount, 120 - renCount);\r\n        //console.log(renCount);\r\n        if (renCount == 50) {\r\n          this.life = obj.life;\r\n          this.maxLife = obj.life;\r\n          this.position = this.deadPosition;\r\n          this.isDead = false;\r\n          this.bullet = [];\r\n          this.bulletType = 'normal';\r\n        }\r\n      }.bind(this))\r\n    );\r\n    deadCb();\r\n  }\r\n\r\n}","import lookPath from './lookPath';\r\nimport movePathList from './movePathList';\r\nimport { animation } from './aniEffectMethod';\r\nimport { positionToXY } from './positionMethod';\r\nimport {\r\n  w,\r\n  h,\r\n  pixelWeigth,\r\n  renderData,\r\n} from './config';\r\n\r\nfunction restoreLifeAction(type, value, ship) {\r\n  //'liftReset','liftMax-6','liftRestore-6'\r\n  var actionMap = {\r\n    liftReset: function (ship) {\r\n      ship.life = ship.maxLife;\r\n    },\r\n    liftMax: function (ship, value) {\r\n      var val = parseInt(value);\r\n      ship.maxLife += val;\r\n    },\r\n    liftRestore: function (ship, value) {\r\n      var val = parseInt(value);\r\n      if (ship.life + val > ship.maxLife) {\r\n        return ship.life = ship.maxLife;\r\n      }\r\n      return ship.life += val;\r\n    },\r\n  }\r\n\r\n  if (actionMap[type]) actionMap[type](ship, value);\r\n}\r\n\r\nfunction itemMove() {\r\n  if (movePathList[this.movePath] && this.getST() % this.moveTime == 0) movePathList[this.movePath].call(this);\r\n}\r\n\r\nexport default function (obj) {\r\n  this.name = obj.name; //名字\r\n  this.mainX = obj.position;\r\n  this.position = obj.position; //位置\r\n  this.movePath = obj.movePath; //移動的路徑類型\r\n  this.moveTime = obj.moveTime || 1; // 移動間隔\r\n  this.color = obj.color;\r\n  this.look = obj.look;\r\n\r\n  this.restoreLife = obj.restoreLife || [];\r\n  this.changeBullet = obj.changeBullet || '';\r\n\r\n  var effect = obj.effect || function () { };\r\n  var survivalTime = 0;\r\n\r\n  this.getST = function () {\r\n    return survivalTime;\r\n  };\r\n\r\n  this.grapic = function (viewDom) {\r\n    var color = this.color;\r\n    lookPath[this.look](this.position).forEach(function (ps, index) {\r\n      var psObj = positionToXY(ps);\r\n      viewDom.beginPath();\r\n      viewDom.rect(psObj.x - pixelWeigth / 2, psObj.y, pixelWeigth, pixelWeigth);\r\n      viewDom.fillStyle = color;\r\n      viewDom.fill();\r\n    });\r\n  };\r\n\r\n  this.action = function (renderType, viewDom, shipPs) {\r\n    this.grapic(viewDom);\r\n    if (renderType === 'OBJ_MOVE') {\r\n      itemMove.call(this);\r\n      survivalTime++;\r\n    }\r\n  };\r\n\r\n  this.wasPickUp = function (ship) {\r\n    renderData.item.splice(renderData.item.indexOf(this), 1);\r\n    var position = this.position;\r\n    var deadPs = positionToXY(position);\r\n    var restoreLife = this.restoreLife;\r\n    var changeBullet = this.changeBullet;\r\n\r\n    // restoreLife\r\n    if (restoreLife.length > 0) {\r\n      restoreLife.forEach(function (val) {\r\n        var action = val.split('-');\r\n        restoreLifeAction(action[0], action[1], ship);\r\n      });\r\n    }\r\n\r\n    // changeBullet\r\n    if (changeBullet) {\r\n      ship.bulletType = changeBullet;\r\n    }\r\n\r\n    effect(ship);\r\n    delete this;\r\n  }\r\n\r\n}\r\n\r\n","import './main.css';\r\nimport lookPath from './js/lookPath';\r\nimport movePathList from './js/movePathList';\r\nimport script from './js/script';\r\nimport createEnemy from './js/createEnemy';\r\nimport createShip from './js/createShip';\r\nimport createItem from './js/createItem';\r\nimport { animation } from './js/aniEffectMethod';\r\nimport { positionToXY } from './js/positionMethod';\r\nimport {\r\n  atc,\r\n  pixelWeigth,\r\n  w,\r\n  h,\r\n  renderTime,\r\n  bulletTime,\r\n  moveTime,\r\n  renderData,\r\n  controlTime,\r\n  vwidth,\r\n  vheight,\r\n  shipLife,\r\n} from './js/config';\r\n\r\nvar renCount = 0;\r\nvar nextPolling = 1;\r\nvar killCount = 0;\r\nvar bgCount = 0;\r\nvar shotFn;\r\nvar ruleObj = {};\r\n\r\nvar keyType = {\r\n  UP: false,\r\n  RIGHT: false,\r\n  DOWN: false,\r\n  LEFT: false,\r\n  SPACE: false\r\n}\r\n\r\nfunction keyCodeMap(keycode, type) {\r\n  var map = {\r\n    38: function () {\r\n      if (type == 'keydown') keyType.UP = true;\r\n      if (type == 'keyup') keyType.UP = false;\r\n    },\r\n    39: function () {\r\n      if (type == 'keydown') keyType.RIGHT = true;\r\n      if (type == 'keyup') keyType.RIGHT = false;\r\n    },\r\n    40: function () {\r\n      if (type == 'keydown') keyType.DOWN = true;\r\n      if (type == 'keyup') keyType.DOWN = false;\r\n    },\r\n    37: function () {\r\n      if (type == 'keydown') keyType.LEFT = true;\r\n      if (type == 'keyup') keyType.LEFT = false;\r\n    },\r\n    32: function () {\r\n      if (type == 'keydown') {\r\n        keyType.SPACE = true;\r\n        ship.shot();\r\n      }\r\n      if (type == 'keyup') keyType.SPACE = false;\r\n    }\r\n  };\r\n\r\n  if (map[keycode]) {\r\n    map[keycode]();\r\n  }\r\n}\r\n\r\nfunction actionMove(ship) {\r\n  var action = {\r\n    UP: function () {\r\n      var ps = ship.position;\r\n      ship.position = (ps - w > -1) ? ps - w : ps;\r\n    },\r\n    RIGHT: function () {\r\n      var ps = ship.position;\r\n      if (ps + 1 <= w * h - 1) {\r\n        if ((ps + 1) % w !== 0) {\r\n          ship.position = ps + 1;\r\n        }\r\n      }\r\n    },\r\n    DOWN: function () {\r\n      var ps = ship.position;\r\n      var nowY = Math.round((ps - ps % w) / w);\r\n      if (ps + w < w * h) {\r\n        ship.position = (nowY < h) ? ps + w : ps;\r\n      }\r\n    },\r\n    LEFT: function () {\r\n      var ps = ship.position;\r\n      if (ps - 1 > -1) {\r\n        if (ps % w !== 0) {\r\n          ship.position = ps - 1;\r\n        }\r\n      }\r\n    },\r\n    SPACE: function () {\r\n      shotDriver();\r\n    }\r\n  };\r\n  for (var key in keyType) {\r\n    if (keyType[key] == true) action[key]();\r\n  }\r\n  if (!keyType.SPACE) closeShot();\r\n}\r\n\r\nfunction shotDriver() {\r\n  if (!shotFn) {\r\n    shotFn = setInterval(function () {\r\n      ship.shot();\r\n    }, 1000 / ship.shotFps);\r\n  }\r\n}\r\n\r\nfunction closeShot() {\r\n  clearInterval(shotFn);\r\n  shotFn = null;\r\n}\r\n\r\nfunction bulletPosition(shipPs) {\r\n  var enemyBulleArr = renderData.enemyBullet;\r\n  for (var key in enemyBulleArr) {\r\n    enemyBulleArr[key].data = enemyBulleArr[key].fn(shipPs);\r\n    if (enemyBulleArr[key].data.clear) {\r\n      enemyBulleArr.splice(key, 1);\r\n    };\r\n  }\r\n  //console.log(enemyBulleArr);\r\n}\r\n\r\nvar ship = new createShip({\r\n  name: 'MK-2',\r\n  life: shipLife,\r\n  position: w * Math.floor(h / 2) - Math.floor(w / 2),\r\n  deadPosition: w * Math.floor(h / 2) - Math.floor(w / 2),\r\n  look: 'MK-2',\r\n  deadCb: function (ship) {\r\n    killCount = 0;\r\n    renCount = 0;\r\n    nextPolling = 100;\r\n  }\r\n});\r\n\r\nfunction gaphic(TYPE) {\r\n  var bestScore = localStorage.getItem('bestScore') || 0;\r\n  var bestMileage = localStorage.getItem('bestMileage') || 0;\r\n  var shipLookType = 'MK-2';\r\n\r\n  script(renCount, ruleObj);\r\n  if (TYPE === 'OBJ_MOVE') {\r\n    var createObj = false;\r\n    var item = ruleObj.item;\r\n\r\n    if (renCount == nextPolling) {\r\n      for (var x = 0; x < ruleObj.enemyQuantity; x++) {\r\n        var enemyObj = ruleObj.enemy[(renCount % ruleObj.enemy.length)];\r\n        enemyObj.position = Math.floor(Math.random() * w);\r\n        enemyObj.deadCb = function () {\r\n          killCount++;\r\n          if (bestScore < killCount) localStorage.setItem('bestScore', killCount);\r\n        };\r\n        renderData.enemy.push(new createEnemy(enemyObj));\r\n      }\r\n      nextPolling = renCount + Math.floor(Math.random() * ruleObj.enemyPolling[1] + ruleObj.enemyPolling[0]);\r\n    }\r\n\r\n    if(item){\r\n      item.forEach(function(itemData){\r\n        itemData.position = Math.floor(Math.random() * w);\r\n        renderData.item.push(new createItem(itemData));  \r\n      });\r\n      ruleObj.item = null;\r\n    }\r\n\r\n    bgCount++;\r\n    renCount++;\r\n    if (bestMileage < renCount) localStorage.setItem('bestMileage', renCount);\r\n  }\r\n\r\n  if (TYPE === 'BULLET_MOVE') {\r\n    bulletPosition(ship.position);\r\n  }\r\n\r\n  //canvas\r\n  var viewDom = document.getElementById('view').getContext('2d');\r\n  viewDom.clearRect(0, 0, vwidth, vheight);\r\n\r\n  // ship\r\n  ship.grapic(viewDom);\r\n\r\n  //enmyBullet\r\n  renderData.enemyBullet.map(function (bullt) {\r\n    var bulletObj = positionToXY(bullt.data.position);\r\n    //viewDom.drawImage(enemyImg, bulletObj.x - 15 / 2, bulletObj.y - 5, 15, 15);\r\n    var enemyImg = document.getElementById(bullt.data.look);\r\n    viewDom.drawImage(enemyImg, bullt.data.x - 15 / 2, bullt.data.y - 5, bullt.data.w, bullt.data.h);\r\n  })\r\n\r\n  // enmy\r\n  renderData.enemy.forEach(function (obj) {\r\n    obj.action(TYPE, viewDom, ship.position);\r\n  })\r\n\r\n  // item\r\n  renderData.item.forEach(function (obj) {\r\n    obj.action(TYPE, viewDom, ship.position);\r\n  })\r\n\r\n  // effect\r\n  renderData.aniEffect.forEach(function (el) {\r\n    el(viewDom);\r\n  })\r\n\r\n  //bg\r\n  document.getElementById('view').style.backgroundPositionY = bgCount + 'px';\r\n\r\n  document.getElementById('score').innerHTML = 'Score: <div class=\"score\">' + killCount +\r\n    '</div><br/> Mileage: ' + renCount +\r\n    '<br/>Best score: ' + (localStorage.getItem('bestScore') || 0) +\r\n    '<br/> Best Mileage: ' + bestMileage +\r\n    '<br/> Life: ' + ship.life +'/'+ ship.maxLife;\r\n\r\n  document.getElementById('life').style.width = (100 / ship.maxLife * ship.life) + '%';\r\n\r\n}\r\n\r\nfunction render(TYPE) {\r\n  gaphic(TYPE);\r\n}\r\n\r\ndocument.addEventListener('keydown', function (e) {\r\n  keyCodeMap(e.keyCode, 'keydown');\r\n}, false);\r\ndocument.addEventListener('keyup', function (e) {\r\n  keyCodeMap(e.keyCode, 'keyup');\r\n}, false);\r\n\r\ndocument.addEventListener('touchstart', touchAction, false);\r\ndocument.addEventListener('touchmove', touchAction, false);\r\ndocument.addEventListener('touchend', closeShot, false);\r\n\r\nfunction touchAction(event) {\r\n  var event = event || window.event;\r\n  event.preventDefault();\r\n  if (event.touches[0]) {\r\n    var x = Math.floor(event.touches[0].pageX / pixelWeigth);\r\n    var y = Math.floor(event.touches[0].pageY / pixelWeigth);\r\n    var _ps = (w * y + x);\r\n    ship.position = _ps;\r\n    shotDriver();\r\n    //document.getElementById(\"debug\").innerHTML = \"Touch moved (\" + x + \",\" + y + \"), \" + (w * y + x);\r\n  }\r\n}\r\n\r\ndocument.getElementById('view').height = vheight;\r\ndocument.getElementById('view').width = vwidth;\r\n\r\nsetInterval(function () {\r\n  render('OBJ_MOVE')\r\n}, renderTime);\r\n\r\n\r\nsetInterval(function () {\r\n  render('CONTROL_MOVE');\r\n  !atc.isMobile() && actionMove(ship);\r\n}, controlTime);\r\n\r\n\r\nsetInterval(function () {\r\n  render('BULLET_MOVE');\r\n}, bulletTime);\r\n\r\n//todo *做了 -不做了\r\n\r\n//*敵機死亡效果\r\n//-分開敵人及主角機的lookPath\r\n//-組成像素可縮小\r\n//*敵機子彈種類多元\r\n\r\n//*主角機有血量\r\n//-主角機階段進化\r\n//*主角機物件化？\r\n\r\n//*子彈發射時間間隔可調整\r\n//*子彈發射時間pc與mobile驅動方式一致\r\n\r\n//*加入背景\r\n\r\n//*射擊效果\r\n//*增強道具\r\n//*主角機可切換子彈\r\n//*出彈頻率應該綁在SHIP物件\r\n// 來一點速度感的特效\r\n\r\n// BOSS設計\r\n//*關卡設計","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}